import{I as Y}from"./index.8b6b6a08.js";import{F as j,u as W}from"./provide.deebc008.js";import{v as $}from"./index.38f8c4d5.js";import{a as m,H as q,v as L,s as J,I as Q,u as Z,e as d,c as x}from"./shared.33d42a23.js";import{d as _,a as V,b as B,w as ee,p as O,ai as ae,f as E,h as N,M as S,D as re,N as u,R as le,O as k,q as b,n as oe}from"./vue-router.esm-bundler.d85fe05e.js";var ne={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:m(),onChange:m(),"onUpdate:modelValue":m()},G=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),K=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function ke(){var{bindChildren:e,childProviders:r}=L(G),{length:o}=q(K);return{length:o,checkboxes:r,bindCheckboxes:e}}function ie(){var{bindParent:e,parentProvider:r}=J(G),{index:o}=Q(K);return{index:o,checkboxGroup:r,bindCheckboxGroup:e}}var{n:se,classes:de}=x("checkbox");function ue(e,r){var o=O("var-icon"),t=O("var-form-details"),c=ae("ripple");return E(),N("div",{class:u(e.n("wrap")),onClick:r[0]||(r[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[S("div",{class:u(e.n())},[re((E(),N("div",{class:u(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:le({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?k(e.$slots,"checked-icon",{key:0},()=>[b(o,{class:u(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):k(e.$slots,"unchecked-icon",{key:1},()=>[b(o,{class:u(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[c,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),S("div",{class:u(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[k(e.$slots,"default")],2)],2),b(t,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const C=_({render:ue,name:"VarCheckbox",directives:{Ripple:$},components:{VarIcon:Y,VarFormDetails:j},props:ne,setup(e){var r=V(!1),o=B(()=>r.value===e.checkedValue),t=B(()=>e.checkedValue),c=V(!1),{checkboxGroup:i,bindCheckboxGroup:A}=ie(),{form:s,bindForm:D}=W(),{errorMessage:P,validateWithTrigger:R,validate:U,resetValidation:h}=Z(),w=a=>{oe(()=>{var{validateTrigger:l,rules:n,modelValue:v}=e;R(l,a,n,v)})},f=a=>{r.value=a;var{checkedValue:l,onChange:n}=e;d(e["onUpdate:modelValue"],r.value),d(n,r.value),w("onChange"),a===l?i==null||i.onChecked(l):i==null||i.onUnchecked(l)},z=a=>{var{disabled:l,readonly:n,checkedValue:v,uncheckedValue:I,onClick:T}=e;if(!(s!=null&&s.disabled.value||l)&&(d(T,a),!(s!=null&&s.readonly.value||n))){c.value=!0;var F=i?i.checkedCount.value>=Number(i.max.value):!1;!o.value&&F||f(o.value?I:v)}},H=a=>{var{checkedValue:l,uncheckedValue:n}=e;r.value=a.includes(l)?l:n},M=()=>{c.value=!1},p=()=>{d(e["onUpdate:modelValue"],e.uncheckedValue),h()},X=a=>{var{checkedValue:l,uncheckedValue:n}=e,v=![l,n].includes(a);v&&(a=o.value?n:l),f(a)},g=()=>U(e.rules,e.modelValue);ee(()=>e.modelValue,a=>{r.value=a},{immediate:!0});var y={checkedValue:t,checked:o,sync:H,validate:g,resetValidation:h,reset:p,resetWithAnimation:M};return d(A,y),d(D,y),{withAnimation:c,checked:o,errorMessage:P,checkboxGroupErrorMessage:i==null?void 0:i.errorMessage,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,n:se,classes:de,handleClick:z,toggle:X,reset:p,validate:g,resetValidation:h}}});C.install=function(e){e.component(C.name,C)};export{C,ke as u};
