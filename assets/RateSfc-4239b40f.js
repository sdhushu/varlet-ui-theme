import{I as q}from"./index-b7440cdf.js";import{F as A,u as E}from"./provide-284e6af5.js";import{v as X}from"./index-dfe18fd8.js";import{a as N,j as Z,e as u,t as R,c as G}from"./shared-083249af.js";import{d as H,Z as i,p as k,ag as J,f as b,h,M as K,F as O,ai as Q,D as Y,R as I,N as v,q as z,n as $}from"./vue-router.esm-bundler-a6d65396.js";var x={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:N(),"onUpdate:modelValue":N()},{n:s}=G("rate"),ee=["onClick"];function ae(e,a){var c=k("var-icon"),d=k("var-form-details"),f=J("ripple");return b(),h("div",{class:v(e.n("wrap"))},[K("div",{class:v(e.n())},[(b(!0),h(O,null,Q(e.toNumber(e.count),n=>Y((b(),h("div",{key:n,style:I(e.getStyle(n)),class:v(e.getClass(n)),onClick:o=>e.handleClick(n,o)},[z(c,{class:v(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(n).name,style:I({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"])],14,ee)),[[f,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]])),128))],2),z(d,{"error-message":e.errorMessage},null,8,["error-message"])],2)}var B=H({name:"VarRate",components:{VarIcon:q,VarFormDetails:A},directives:{Ripple:X},props:x,setup(e){var{form:a,bindForm:c}=E(),{errorMessage:d,validateWithTrigger:f,validate:n,resetValidation:o}=Z(),D=r=>{var{count:l,gap:t}=e;return{color:p(r).color,marginRight:r!==i(l)?R(t):0}},F=r=>{var{name:l,color:t}=p(r);return{[s("content")]:!0,[s("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[s("--error")]:d.value,[s("--primary")]:l!==e.emptyIcon&&!t}},p=r=>{var{modelValue:l,disabled:t,disabledColor:m,color:g,half:w,emptyColor:L,icon:P,halfIcon:W,emptyIcon:j}=e,y=g;return(t||a!=null&&a.disabled.value)&&(y=m),r<=i(l)?{color:y,name:P}:w&&r<=i(l)+.5?{color:y,name:W}:{color:t||a!=null&&a.disabled.value?m:L,name:j}},U=(r,l)=>{if(e.half){var{offsetWidth:t}=l.target;l.offsetX<=Math.floor(t/2)&&(r-=.5)}u(e["onUpdate:modelValue"],r)},S=()=>n(e.rules,i(e.modelValue)),M=()=>$(()=>f(["onChange"],"onChange",e.rules,e.modelValue)),T=(r,l)=>{var{readonly:t,disabled:m,onChange:g}=e;t||m||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(U(r,l),u(g,r),M())},V=()=>{u(e["onUpdate:modelValue"],0),o()},_={reset:V,validate:S,resetValidation:o};return u(c,_),{errorMessage:d,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:D,getClass:F,getCurrentState:p,handleClick:T,reset:V,validate:S,resetValidation:o,toSizeUnit:R,toNumber:i,n:s}}});B.render=ae;const C=B;C.install=function(e){e.component(C.name,C)};export{C as R};
