import{p as $,P as N}from"./popup-2811b8cc.js";import{B as R}from"./index-01bd20a5.js";import{p as z,a as p,b as A,t as I,c as L,e as t,m as M}from"./shared-083249af.js";import{p as Q}from"./index-a4dc15c3.js";import{d as W,a as b,w as T,p as j,f as O,i as h,S as B,M as f,N as i,O as P,P as v,Q as d,R as q,j as D,m as E,ar as F,r as G,W as H,n as J}from"./vue-router.esm-bundler-a6d65396.js";function S(){return S=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S.apply(this,arguments)}function K(e){return["left","center","right"].includes(e)}var X=S({show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:K},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},onBeforeClose:p(),onConfirm:p(),onCancel:p(),"onUpdate:show":p()},z($,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));function w(){return w=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w.apply(this,arguments)}var{n:Y,classes:Z}=L("dialog");function x(e,a){var n=j("var-button"),o=j("var-popup");return O(),h(o,{class:i(e.n("popup")),"var-dialog-cover":"",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.popupCloseOnClickOverlay,teleport:e.teleport,onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange,onClickOverlay:e.handleClickOverlay},{default:B(()=>[f("div",E({class:e.classes(e.n("$--box"),e.n(),e.dialogClass),style:w({width:e.toSizeUnit(e.width)},e.dialogStyle)},e.$attrs),[f("div",{class:i(e.n("title"))},[P(e.$slots,"title",{},()=>[v(d(e.dt(e.title,e.pack.dialogTitle)),1)])],2),f("div",{class:i(e.n("message")),style:q({textAlign:e.messageAlign})},[P(e.$slots,"default",{},()=>[v(d(e.message),1)])],6),f("div",{class:i(e.n("actions"))},[e.cancelButton?(O(),h(n,{key:0,class:i(e.classes(e.n("button"),e.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":e.cancelButtonTextColor,color:e.cancelButtonColor,onClick:e.cancel},{default:B(()=>[v(d(e.dt(e.cancelButtonText,e.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):D("v-if",!0),e.confirmButton?(O(),h(n,{key:1,class:i(e.classes(e.n("button"),e.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":e.confirmButtonTextColor,color:e.confirmButtonColor,onClick:e.confirm},{default:B(()=>[v(d(e.dt(e.confirmButtonText,e.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):D("v-if",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}var U=W({name:"VarDialog",components:{VarPopup:N,VarButton:R},inheritAttrs:!1,props:X,setup(e){var a=b(!1),n=b(!1),o=()=>t(e["onUpdate:show"],!1),u=()=>{var{closeOnClickOverlay:l,onClickOverlay:c,onBeforeClose:k}=e;if(t(c),!!l){if(k!=null){k("close",o);return}t(e["onUpdate:show"],!1)}},y=()=>{var{onBeforeClose:l,onConfirm:c}=e;if(t(c),l!=null){l("confirm",o);return}t(e["onUpdate:show"],!1)},V=()=>{var{onBeforeClose:l,onCancel:c}=e;if(t(c),l!=null){l("cancel",o);return}t(e["onUpdate:show"],!1)};return T(()=>e.show,l=>{a.value=l},{immediate:!0}),T(()=>e.closeOnClickOverlay,l=>{if(e.onBeforeClose!=null){n.value=!1;return}n.value=l},{immediate:!0}),{n:Y,classes:Z,pack:Q,dt:A,popupShow:a,popupCloseOnClickOverlay:n,handleClickOverlay:u,confirm:y,cancel:V,toSizeUnit:I}}});U.render=x;const s=U;function m(){return m=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.apply(this,arguments)}var r,C={};function _(e){return e===void 0&&(e={}),H(e)?m({},C,{message:e}):m({},C,e)}function g(e){return F()?new Promise(a=>{g.close();var n=_(e),o=G(n);o.teleport="body",r=o;var{unmountInstance:u}=M(s,o,{onConfirm:()=>{t(o.onConfirm),a("confirm")},onCancel:()=>{t(o.onCancel),a("cancel")},onClose:()=>{t(o.onClose),a("close")},onClosed:()=>{t(o.onClosed),u(),r===o&&(r=null)},onRouteChange:()=>{u(),r===o&&(r=null)},"onUpdate:show":y=>{o.show=y}});o.show=!0}):Promise.resolve()}function ee(e){C=e}function oe(){C={}}function ne(){if(r!=null){var e=r;r=null,J().then(()=>{e.show=!1})}}Object.assign(g,{setDefaultOptions:ee,resetDefaultOptions:oe,close:ne});s.install=function(e){e.component(s.name,s)};g.install=function(e){e.component(s.name,s)};g.Component=s;export{g as D};
