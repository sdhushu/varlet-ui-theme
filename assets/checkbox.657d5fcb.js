import{I}from"./index.27bcfa75.js";import{F as Y,u as j}from"./provide.f6089a49.js";import{v as W}from"./index.99ecac2e.js";import{G as $,r as q,q as J,H as L,u as Q,b as d,c as Z}from"./shared.683c68c7.js";import{d as x,a as g,b as V,w as _,p as B,ai as ee,f as O,h as E,M as G,D as ae,N as u,R as re,O as m,q as k,n as le}from"./vue-router.esm-bundler.94bfc301.js";var oe={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},N=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),S=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function me(){var{bindChildren:e,childProviders:r}=q(N),{length:o}=$(S);return{length:o,checkboxes:r,bindCheckboxes:e}}function ne(){var{bindParent:e,parentProvider:r}=J(N),{index:o}=L(S);return{index:o,checkboxGroup:r,bindCheckboxGroup:e}}var{n:ie,classes:se}=Z("checkbox");function de(e,r){var o=B("var-icon"),v=B("var-form-details"),c=ee("ripple");return O(),E("div",{class:u(e.n("wrap")),onClick:r[0]||(r[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[G("div",{class:u(e.n())},[ae((O(),E("div",{class:u(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:re({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?m(e.$slots,"checked-icon",{key:0},()=>[k(o,{class:u(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):m(e.$slots,"unchecked-icon",{key:1},()=>[k(o,{class:u(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[c,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),G("div",{class:u(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[m(e.$slots,"default")],2)],2),k(v,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const b=x({render:de,name:"VarCheckbox",directives:{Ripple:W},components:{VarIcon:I,VarFormDetails:Y},props:oe,setup(e){var r=g(!1),o=V(()=>r.value===e.checkedValue),v=V(()=>e.checkedValue),c=g(!1),{checkboxGroup:i,bindCheckboxGroup:K}=ne(),{form:s,bindForm:A}=j(),{errorMessage:D,validateWithTrigger:P,validate:R,resetValidation:h}=Q(),U=a=>{le(()=>{var{validateTrigger:l,rules:n,modelValue:t}=e;P(l,a,n,t)})},C=a=>{r.value=a;var{checkedValue:l,onChange:n}=e;d(e["onUpdate:modelValue"],r.value),d(n,r.value),U("onChange"),a===l?i==null||i.onChecked(l):i==null||i.onUnchecked(l)},w=a=>{var{disabled:l,readonly:n,checkedValue:t,uncheckedValue:F,onClick:X}=e;if(!(s!=null&&s.disabled.value||l)&&(d(X,a),!(s!=null&&s.readonly.value||n))){c.value=!0;var T=i?i.checkedCount.value>=Number(i.max.value):!1;!o.value&&T||C(o.value?F:t)}},z=a=>{var{checkedValue:l,uncheckedValue:n}=e;r.value=a.includes(l)?l:n},H=()=>{c.value=!1},f=()=>{d(e["onUpdate:modelValue"],e.uncheckedValue),h()},M=a=>{var{checkedValue:l,uncheckedValue:n}=e,t=![l,n].includes(a);t&&(a=o.value?n:l),C(a)},p=()=>R(e.rules,e.modelValue);_(()=>e.modelValue,a=>{r.value=a},{immediate:!0});var y={checkedValue:v,checked:o,sync:z,validate:p,resetValidation:h,reset:f,resetWithAnimation:H};return d(K,y),d(A,y),{withAnimation:c,checked:o,errorMessage:D,checkboxGroupErrorMessage:i==null?void 0:i.errorMessage,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,n:ie,classes:se,handleClick:w,toggle:M,reset:f,validate:p,resetValidation:h}}});b.install=function(e){e.component(b.name,b)};export{b as C,me as u};
