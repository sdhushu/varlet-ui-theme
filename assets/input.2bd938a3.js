import{F as G,u as H}from"./provide.8d6c1d2f.js";import{I as J}from"./index.a6c22209.js";import{d as K,a as b,z as L,b as X,aw as g,o as Y,p as T,f as t,h as p,M as m,N as o,O as S,j as C,R as f,Q as Z,i as c,q as x,n as _}from"./vue-router.esm-bundler.cc802ca4.js";import{u as ee,b as s,c as ae}from"./shared.c0b67846.js";function ne(e){return["text","password","number"].includes(e)}var le={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:ne},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:F,classes:re}=ae("input"),oe=["id","disabled","type","value","maxlength","rows"],se=["id","disabled","type","value","maxlength"],ue=["for"];function de(e,n){var v=T("var-icon"),d=T("var-form-details");return t(),p("div",{class:o(e.classes(e.n(),"var--box",[e.disabled,e.n("--disabled")])),onClick:n[10]||(n[10]=function(){return e.handleClick&&e.handleClick(...arguments)})},[m("div",{class:o(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:f({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[m("div",{class:o(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[S(e.$slots,"prepend-icon")],2),m("div",{class:o(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(t(),p("input",{key:0,class:o(e.n("autocomplete"))},null,2)):C("v-if",!0),e.textarea?(t(),p("textarea",{key:1,class:o(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:f({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:n[0]||(n[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[1]||(n[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[2]||(n[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[3]||(n[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[4]||(n[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},`
        `,46,oe)):(t(),p("input",{key:2,class:o(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:f({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:n[5]||(n[5]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[6]||(n[6]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[7]||(n[7]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[8]||(n[8]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[9]||(n[9]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},null,46,se)),m("label",{class:o(e.classes("var--ellipsis",[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:f({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},Z(e.placeholder),15,ue)],2),m("div",{class:o(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[S(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(t(),c(v,{key:0,class:o(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):C("v-if",!0)])],2)],6),e.line?(t(),p("div",{key:0,class:o(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:f({background:e.errorMessage?void 0:e.blurColor})},[m("div",{class:o(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:f({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):C("v-if",!0),x(d,{"error-message":e.errorMessage,"maxlength-text":e.maxlengthText},null,8,["error-message","maxlength-text"])],2)}const B=K({render:de,name:"VarInput",components:{VarIcon:J,VarFormDetails:G},props:le,setup(e){var n=b("var-input-"+L().uid),v=b(null),d=b(!1),w=X(()=>{var{maxlength:a,modelValue:l}=e;return a?g(l)?"0 / "+a:String(l).length+"/"+a:""}),{bindForm:D,form:r}=H(),{errorMessage:z,validateWithTrigger:N,validate:P,resetValidation:h}=ee(),i=a=>{_(()=>{var{validateTrigger:l,rules:u,modelValue:y}=e;N(l,a,u,y)})},R=()=>{var{hint:a,modelValue:l}=e;if(!a&&!g(l))return F("--placeholder-hidden");if(a&&(!g(l)||d.value))return F("--placeholder-hint")},U=a=>{d.value=!0,s(e.onFocus,a),i("onFocus")},E=a=>{d.value=!1,s(e.onBlur,a),i("onBlur")},$=a=>{var{value:l}=a.target;l=V(l),s(e["onUpdate:modelValue"],l),s(e.onInput,l,a),i("onInput")},j=a=>{var{value:l}=a.target;s(e.onChange,V(l),a),i("onChange")},A=()=>{var{disabled:a,readonly:l,clearable:u,onClear:y}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||a||l||!u||(s(e["onUpdate:modelValue"],""),s(y,""),i("onClear"))},O=a=>{var{disabled:l,onClick:u}=e;r!=null&&r.disabled.value||l||(s(u,a),i("onClick"))},V=a=>e.modelModifiers.trim?a.trim():a,W=a=>{var{disabled:l,readonly:u}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||l||u||a.stopPropagation()},k=()=>{s(e["onUpdate:modelValue"],""),h()},I=()=>P(e.rules,e.modelValue),M=()=>{var a;(a=v.value)==null||a.focus()},q=()=>{v.value.blur()},Q={reset:k,validate:I,resetValidation:h};return s(D,Q),Y(()=>{e.autofocus&&M()}),{el:v,id:n,isFocus:d,errorMessage:z,maxlengthText:w,formDisabled:r==null?void 0:r.disabled,formReadonly:r==null?void 0:r.readonly,n:F,classes:re,isEmpty:g,computePlaceholderState:R,handleFocus:U,handleBlur:E,handleInput:$,handleChange:j,handleClear:A,handleClick:O,handleTouchstart:W,validate:I,resetValidation:h,reset:k,focus:M,blur:q}}});B.install=function(e){e.component(B.name,B)};export{B as I};
