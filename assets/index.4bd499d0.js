import{d as P,a as K,b as I,w as N,o as H,p as h,D as Q,E as Z,f as y,h as J,M as k,N as v,O as b,P as $,Q as B,i as C,j as V,R as j,q as S,S as O,m as w,G as W,T as X,r as z,Y as _,C as x}from"./vue-router.esm-bundler.d85fe05e.js";import{p as m,L as ee}from"./index.b51730c4.js";import{I as ne}from"./index.8b6b6a08.js";import{u as ae}from"./zIndex.7d374186.js";import{p as g,a as p,e as s,c as q,o as te,m as oe,q as re,h as ie,j as se,l as U}from"./shared.33d42a23.js";import{C as le}from"./index.a5af30e7.js";import{u as de}from"./lock.fe41208f.js";function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},E.apply(this,arguments)}function ce(e){var n=["top","center","bottom"];return n.includes(e)}function ue(e){return A.includes(e)}var D={type:{type:String,validator:ue},position:{type:String,default:"top",validator:ce},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:g(m,"type"),loadingSize:g(m,"size"),loadingRadius:g(m,"radius"),loadingColor:E({},g(m,"color"),{default:"currentColor"}),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:p(),onOpened:p(),onClose:p(),onClosed:p(),"onUpdate:show":p(),_update:{type:String}},{n:pe,classes:fe}=q("snackbar"),ve={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""};function me(e,n){var a=h("var-icon"),t=h("var-loading");return Q((y(),J("div",{class:v(e.n()),style:j({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[k("div",{class:v(e.classes(e.n("wrapper"),e.n("wrapper-"+e.position),e.n("$-elevation--4"),[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n("wrapper-"+e.type)])),style:j({zIndex:e.zIndex})},[k("div",{class:v([e.n("content"),e.contentClass])},[b(e.$slots,"default",{},()=>[$(B(e.content),1)])],2),k("div",{class:v(e.n("action"))},[e.iconName?(y(),C(a,{key:0,name:e.iconName},null,8,["name"])):V("v-if",!0),e.type==="loading"?(y(),C(t,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):V("v-if",!0),b(e.$slots,"action")],2)],6)],6)),[[Z,e.show]])}const G=P({render:me,name:"VarSnackbarCore",components:{VarLoading:ee,VarIcon:ne},props:D,setup(e){var n=K(null),{zIndex:a}=ae(()=>e.show,1);de(()=>e.show,()=>e.lockScroll);var t=I(()=>e.type==="loading"||e.forbidClick),o=I(()=>e.type?ve[e.type]:""),i=()=>{n.value=setTimeout(()=>{e.type!=="loading"&&s(e["onUpdate:show"],!1)},e.duration)};return N(()=>e.show,u=>{u?(s(e.onOpen),i()):u===!1&&(clearTimeout(n.value),s(e.onClose))}),N(()=>e._update,()=>{clearTimeout(n.value),i()}),H(()=>{e.show&&(s(e.onOpen),i())}),{SNACKBAR_TYPE:A,n:pe,classes:fe,zIndex:a,iconName:o,isForbidClick:t}}});var{n:ge}=q("snackbar");function ye(e,n){var a=h("var-snackbar-core");return y(),C(X,{to:e.teleport,disabled:e.disabled},[S(W,{name:e.n()+"-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:O(()=>[S(a,w(e.$props,{class:e.n("transition")}),{action:O(()=>[b(e.$slots,"action")]),default:O(()=>[b(e.$slots,"default",{},()=>[$(B(e.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const d=P({render:ye,name:"VarSnackbar",components:{VarSnackbarCore:G},props:D,setup(){var{disabled:e}=te();return{n:ge,disabled:e}}});function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},f.apply(this,arguments)}function be(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!x(e)}var A=["loading","success","warning","info","error"],L=0,T=!1,M,c=!1,r=z([]),Se={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},ke={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},Oe={setup(){return()=>{var e=r.map(a=>{var{id:t,reactiveSnackOptions:o,_update:i}=a,u=document.querySelector(".var-transition-group");o.forbidClick||o.type==="loading"?u.classList.add("var-pointer-auto"):u.classList.remove("var-pointer-auto"),c&&(o.position="top");var R=c?"relative":"absolute",Y=f({position:R},Te(o.position));return S(G,w(o,{key:t,style:Y,"data-id":t,_update:i,show:o.show,"onUpdate:show":F=>o.show=F}),null)}),n=le.zIndex;return S(_,w(ke,{style:{zIndex:n},onAfterEnter:he,onAfterLeave:Ce}),be(e)?e:{default:()=>[e]})}}},l=function(e){var n=ie(e)||se(e)?{content:String(e)}:e,a=z(f({},Se,n));a.show=!0,T||(T=!0,M=oe(Oe).unmountInstance);var{length:t}=r,o={id:L++,reactiveSnackOptions:a};if(t===0||c)we(o);else{var i="update-"+L;Ee(a,i)}return{clear(){!c&&r.length?r[0].reactiveSnackOptions.show=!1:a.show=!1}}};A.forEach(e=>{l[e]=n=>(re(n)?n.type=e:n={content:n,type:e},l(n))});l.install=function(e){e.component(d.name,d)};l.allowMultiple=function(e){e===void 0&&(e=!1),e!==c&&(r.forEach(n=>{n.reactiveSnackOptions.show=!1}),c=e)};l.clear=function(){r.forEach(e=>{e.reactiveSnackOptions.show=!1})};l.Component=d;function he(e){var n=e.getAttribute("data-id"),a=r.find(t=>t.id===U(n));a&&s(a.reactiveSnackOptions.onOpened)}function Ce(e){e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");var n=e.getAttribute("data-id"),a=r.find(o=>o.id===U(n));a&&(a.animationEnd=!0,s(a.reactiveSnackOptions.onClosed));var t=r.every(o=>o.animationEnd);t&&(s(M),r=z([]),T=!1)}function we(e){r.push(e)}function Ee(e,n){var[a]=r;a.reactiveSnackOptions=f({},a.reactiveSnackOptions,e),a._update=n}function Te(e){return e===void 0&&(e="top"),e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}d.install=function(e){e.component(d.name,d)};const Pe=l;export{Pe as S};
