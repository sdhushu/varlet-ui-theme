import{C as Ee}from"./checkbox-a4670767.js";import{v as Fe}from"./index-10e817da.js";import{d as ne,a as C,b as S,w as L,p as B,ag as Me,D as Oe,f as t,h as c,M as f,N as s,R as V,i as J,ah as oe,j as U,O as E,P as se,Q as P,av as $,q as j,S as q,F as ae,ai as $e,as as Be,n as Pe}from"./vue-router.esm-bundler-1cdb4ad3.js";import{u as Te,g as De,h as Ne,i as Ie,c as ie,a as k,j as Ae,e as v,o as re}from"./shared-c5b4ee22.js";import{I as Le}from"./index-19d5ca99.js";import{M as Ue}from"./menu-f31cf3d2.js";import{C as Ye}from"./index-5a0d4851.js";import{F as We,u as Re}from"./provide-2db49db1.js";var de=Symbol("SELECT_BIND_OPTION_KEY"),ue=Symbol("SELECT_COUNT_OPTION_KEY");function ze(){var{bindChildren:e,childProviders:a}=De(de),{length:d}=Te(ue);return{length:d,options:a,bindOptions:e}}function Ke(){var{bindParent:e,parentProvider:a}=Ne(de),{index:d}=Ie(ue);if(!e||!a)throw Error("<var-option/> must in <var-select/>");return{index:d,select:a,bindSelect:e}}var je={label:{},value:{}},{n:qe,classes:Qe}=ie("option");function Ge(e,a){var d=B("var-checkbox"),p=Me("ripple");return Oe((t(),c("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.optionSelected,e.n("--selected-color")])),style:V({width:e.wrapWidth,color:e.optionSelected?e.focusColor:void 0}),onClick:a[2]||(a[2]=function(){return e.handleClick&&e.handleClick(...arguments)})},[f("div",{class:s(e.classes(e.n("cover"),[e.optionSelected,e.n("--selected-background")])),style:V({background:e.optionSelected?e.focusColor:void 0})},null,6),e.multiple?(t(),J(d,{key:0,ref:"checkbox","checked-color":e.focusColor,modelValue:e.optionSelected,"onUpdate:modelValue":a[0]||(a[0]=y=>e.optionSelected=y),onClick:a[1]||(a[1]=oe(()=>{},["stop"])),onChange:e.handleSelect},null,8,["checked-color","modelValue","onChange"])):U("v-if",!0),f("div",{class:s(e.classes(e.n("text"),e.n("$--ellipsis")))},[E(e.$slots,"default",{},()=>[se(P(e.label),1)])],2)],6)),[[p]])}var ve=ne({name:"VarOption",directives:{Ripple:Fe},components:{VarCheckbox:Ee},props:je,setup(e){var a=C(!1),d=S(()=>a.value),p=S(()=>e.label),y=S(()=>e.value),{select:g,bindSelect:m}=Ke(),{wrapWidth:Y,multiple:F,focusColor:M,onSelect:T}=g,n=()=>{a.value=!a.value,T(O)},W=()=>T(O),h=R=>{a.value=R},O={label:p,value:y,selected:d,sync:h};return L([()=>e.label,()=>e.value],()=>{if(e.label==null&&e.value==null)throw Error(`Props label and value can't both be undefined
`)},{immediate:!0}),m(O),{n:qe,classes:Qe,optionSelected:a,wrapWidth:Y,multiple:F,focusColor:M,handleClick:n,handleSelect:W}}});ve.render=Ge;const Q=ve;Q.install=function(e){e.component(Q.name,Q)};function He(e){return["left","right","center"].includes(e)}var Je={modelValue:{default:void 0},placeholder:{type:String},multiple:{type:Boolean,default:!1},offsetY:{type:[String,Number],default:0},chip:{type:Boolean,default:!1},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},separator:{type:String,default:","},textAlign:{type:String,default:"left",validator:He},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:{type:Array},onFocus:k(),onBlur:k(),onClick:k(),onClear:k(),onClose:k(),onChange:k(),"onUpdate:modelValue":k()},{n:G,classes:Xe}=ie("select"),Ze={key:1};function _e(e,a){var d=B("var-chip"),p=B("var-icon"),y=B("var-menu"),g=B("var-form-details");return t(),c("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.formDisabled||e.disabled,e.n("--disabled")])),onClick:a[3]||(a[3]=function(){return e.handleClick&&e.handleClick(...arguments)})},[f("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:V({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[E(e.$slots,"prepend-icon")],2),f("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")])),ref:"wrapEl",onClick:a[2]||(a[2]=function(){return e.handleFocus&&e.handleFocus(...arguments)})},[j(y,{"var-select-cover":"",class:s(e.classes(e.n("menu"))),"offset-y":e.offsetY,disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled,"default-style":!1,show:e.isFocus,"onUpdate:show":a[1]||(a[1]=m=>e.isFocus=m),onClose:e.handleBlur},{menu:q(()=>[f("div",{ref:"menuEl",class:s(e.classes(e.n("scroller"),e.n("$-elevation--3")))},[E(e.$slots,"default")],2)]),default:q(()=>[f("div",{class:s(e.classes(e.n("select"),[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:V({textAlign:e.textAlign,color:e.textColor})},[f("div",{class:s(e.n("label"))},[e.isEmptyModelValue?U("v-if",!0):E(e.$slots,"selected",{key:0},()=>[e.multiple?(t(),c(ae,{key:0},[e.chip?(t(),c("div",{key:0,class:s(e.n("chips"))},[(t(!0),c(ae,null,$e(e.labels,m=>(t(),J(d,{class:s(e.n("chip")),"var-select-cover":"",closable:"",size:"small",type:e.errorMessage?"danger":void 0,key:m,onClick:a[0]||(a[0]=oe(()=>{},["stop"])),onClose:()=>e.handleClose(m)},{default:q(()=>[se(P(m),1)]),_:2},1032,["class","type","onClose"]))),128))],2)):(t(),c("div",{key:1,class:s(e.n("values"))},P(e.labels.join(e.separator)),3))],2112)):(t(),c("span",Ze,P(e.label),1))])],2),E(e.$slots,"arrow-icon",{focus:e.isFocus},()=>[j(p,{class:s(e.classes(e.n("arrow"),[e.isFocus,e.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])])],6),f("label",{class:s(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:V({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},P(e.placeholder),7)]),_:3},8,["class","offset-y","disabled","show","onClose"])],2),f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[E(e.$slots,"append-icon",{},()=>[e.clearable?(t(),J(p,{key:0,class:s(e.n("clear-icon")),name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):U("v-if",!0)])],2)],6),e.line?(t(),c("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:V({background:e.errorMessage?void 0:e.blurColor})},[f("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:V({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):U("v-if",!0),j(g,{"error-message":e.errorMessage},null,8,["error-message"])],2)}var te=ne({name:"VarSelect",components:{VarIcon:Le,VarMenu:Ue,VarChip:Ye,VarFormDetails:We},props:Je,setup(e){var a=C(null),d=C(!1),p=S(()=>e.multiple),y=S(()=>e.focusColor),g=C(""),m=C([]),Y=S(()=>$(e.modelValue)),F=C("0px"),M=C(0),{bindForm:T,form:n}=Re(),{length:W,options:h,bindOptions:O}=ze(),{errorMessage:R,validateWithTrigger:fe,validate:me,resetValidation:z}=Ae(),be=C(null),pe=()=>{var{multiple:r,modelValue:l}=e;if(r){var o=l;m.value=o.map(X)}!r&&!$(l)&&(g.value=X(l)),!r&&$(l)&&(g.value="")},w=r=>{Pe(()=>{var{validateTrigger:l,rules:o,modelValue:i}=e;fe(l,r,o,i)})},D=r=>{var{value:l,label:o}=r;return l.value!=null?l.value:o.value},X=r=>{var l,o,i=h.find(b=>{var{value:u}=b;return u.value===r});return i||(i=h.find(b=>{var{label:u}=b;return u.value===r})),(l=(o=i)==null?void 0:o.label.value)!=null?l:""},he=()=>{var{hint:r,modelValue:l}=e;if(!r&&!$(l))return G("--placeholder-hidden");if(r&&(!$(l)||d.value))return G("--placeholder-hint")},Z=()=>a.value&&window.getComputedStyle(a.value).width||"0px",Ce=()=>{var{disabled:r,readonly:l,onFocus:o}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||(F.value=Z(),M.value=re(e.offsetY),d.value=!0,v(o),w("onFocus"))},ce=()=>{var{disabled:r,readonly:l,onBlur:o}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||(v(o),w("onBlur"))},ye=r=>{var{disabled:l,readonly:o,multiple:i,onChange:b}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||l||o)){var u=i?h.filter(N=>{var{selected:I}=N;return I.value}).map(D):D(r);v(e["onUpdate:modelValue"],u),v(b,u),w("onChange"),!i&&(d.value=!1)}},ge=()=>{var{disabled:r,readonly:l,multiple:o,clearable:i,onClear:b}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||!i)){var u=o?[]:void 0;v(e["onUpdate:modelValue"],u),v(b,u),w("onClear")}},ke=r=>{var{disabled:l,onClick:o}=e;n!=null&&n.disabled.value||l||(v(o,r),w("onClick"))},Ve=r=>{var{disabled:l,readonly:o,modelValue:i,onClose:b}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||l||o)){var u=i,N=h.find(K=>{var{label:A}=K;return A.value===r}),I=u.filter(K=>{var A;return K!==((A=N.value.value)!=null?A:N.label.value)});v(e["onUpdate:modelValue"],I),v(b,I),w("onClose")}},_=()=>{var{multiple:r,modelValue:l}=e;if(r){var o=l;h.forEach(i=>i.sync(o.includes(D(i))))}else h.forEach(i=>i.sync(l===D(i)));pe()},Se=()=>{F.value=Z(),M.value=re(e.offsetY),d.value=!0},we=()=>{d.value=!1},x=()=>me(e.rules,e.modelValue),ee=()=>{v(e["onUpdate:modelValue"],e.multiple?[]:void 0),z()};L(()=>e.multiple,()=>{var{multiple:r,modelValue:l}=e;if(r&&!Be(l))throw Error("The modelValue must be an array when multiple is true")}),L(()=>e.modelValue,_,{deep:!0}),L(()=>W.value,_);var le={wrapWidth:S(()=>F.value),multiple:p,focusColor:y,onSelect:ye,reset:ee,validate:x,resetValidation:z};return O(le),v(T,le),{wrapEl:a,offsetY:M,isFocus:d,errorMessage:R,formDisabled:n==null?void 0:n.disabled,formReadonly:n==null?void 0:n.readonly,label:g,labels:m,isEmptyModelValue:Y,menuEl:be,n:G,classes:Xe,computePlaceholderState:he,handleFocus:Ce,handleBlur:ce,handleClear:ge,handleClick:ke,handleClose:Ve,reset:ee,validate:x,resetValidation:z,focus:Se,blur:we}}});te.render=_e;const H=te;H.install=function(e){e.component(H.name,H)};export{Q as O,H as S};
