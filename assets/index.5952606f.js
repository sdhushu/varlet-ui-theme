import{v as O}from"./index.a7ee3f87.js";import{p as k,P as g}from"./popup.59ba46c8.js";import{I as b}from"./index.11f29402.js";import{p as P,a as A,c as R,b as d,i as B,m as U}from"./shared.cb7db5ff.js";import{p as V}from"./index.2347886b.js";import{d as $,a as z,w as I,p as h,ai as N,f as i,i as y,S as j,M as v,O as C,N as p,Q as f,h as S,ak as D,D as F,R as T,j as E,F as L,m as w,r as M,n as Q}from"./vue-router.esm-bundler.61b845b6.js";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},u.apply(this,arguments)}var q=u({show:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},title:{type:String},closeOnClickAction:{type:Boolean,default:!0},onSelect:{type:Function},"onUpdate:show":{type:Function}},P(k,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])),{n:G,classes:H}=R("action-sheet"),J=["onClick"];function K(e,l){var o=h("var-icon"),s=h("var-popup"),n=N("ripple");return i(),y(s,w({class:e.n("popup-radius"),position:"bottom",overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.closeOnClickOverlay,teleport:e.teleport,show:e.popupShow},{"onUpdate:show":e.handlePopupUpdateShow},{onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange}),{default:j(()=>[v("div",w({class:e.classes(e.n(),e.n("$--box"))},e.$attrs),[C(e.$slots,"title",{},()=>[v("div",{class:p(e.n("title"))},f(e.dt(e.title,e.pack.actionSheetTitle)),3)]),C(e.$slots,"actions",{},()=>[(i(!0),S(L,null,D(e.actions,a=>F((i(),S("div",{class:p(e.classes(e.n("action-item"),a.className,[a.disabled,e.n("--disabled")])),key:a.name,style:T({color:a.color}),onClick:m=>e.handleSelect(a)},[a.icon?(i(),y(o,{key:0,class:p(e.n("action-icon")),"var-action-sheet-cover":"",name:a.icon,size:a.iconSize},null,8,["class","name","size"])):E("v-if",!0),v("div",{class:p(e.n("action-name"))},f(a.name),3)],14,J)),[[n,{disabled:a.disabled}]])),128))])],16)]),_:3},16,["class","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","show","onOpen","onClose","onClosed","onOpened","onRouteChange"])}const t=$({render:K,name:"VarActionSheet",directives:{Ripple:O},components:{VarPopup:g,VarIcon:b},inheritAttrs:!1,props:q,setup(e){var l=z(!1),o=n=>{if(!n.disabled){var{closeOnClickAction:a,onSelect:m}=e;d(m,n),a&&d(e["onUpdate:show"],!1)}},s=n=>d(e["onUpdate:show"],n);return I(()=>e.show,n=>{l.value=n},{immediate:!0}),{n:G,classes:H,handlePopupUpdateShow:s,popupShow:l,pack:V,dt:A,handleSelect:o}}});var r;function c(e){return B()?new Promise(l=>{c.close();var o=M(e);o.teleport="body",r=o;var{unmountInstance:s}=U(t,o,{onSelect:n=>{o.onSelect==null||o.onSelect(n),l(n)},onClose:()=>{o.onClose==null||o.onClose(),l("close")},onClosed:()=>{o.onClosed==null||o.onClosed(),s(),r===o&&(r=null)},onRouteChange:()=>{s(),r===o&&(r=null)},"onUpdate:show":n=>{o.show=n}});o.show=!0}):Promise.resolve()}c.Component=t;t.install=function(e){e.component(t.name,t)};c.close=()=>{if(r!=null){var e=r;r=null,Q().then(()=>{e.show=!1})}};c.install=function(e){e.component(t.name,t)};export{c as A};
