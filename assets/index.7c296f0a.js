import{C as M}from"./cell.3a81f3a9.js";import{I as F}from"./index.3fe6af9c.js";import{n as U,c as z,v as G}from"./shared.afebc00a.js";import{d as H,a as v,b as S,w as Y,o as V,p as _,f as g,h as E,M as q,q as Q,N as T,R as X,O as Z,Z as N,_ as J,e as K,i as C,S as I,an as b,ak as W,P as $,Q as j,F as x}from"./vue-router.esm-bundler.bcd2b732.js";/* empty css                  *//* empty css             */import"./CellSfc.90047be6.js";import{d as ee}from"./index.fb915d03.js";import{b as ae}from"./utils.68b0d7ff.js";import{u as ne}from"./sync.d1807e50.js";import"./_commonjsHelpers.b8add541.js";var re={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},onRefresh:{type:Function},"onUpdate:modelValue":{type:Function}};function R(e,a,i,s,u,r,t){try{var n=e[r](t),o=n.value}catch(c){i(c);return}n.done?a(o):Promise.resolve(o).then(s,u)}function te(e){return function(){var a=this,i=arguments;return new Promise(function(s,u){var r=e.apply(a,i);function t(o){R(r,s,u,t,n,"next",o)}function n(o){R(r,s,u,t,n,"throw",o)}t(void 0)})}}var{n:oe,classes:se}=z("pull-refresh"),m=100,h=-50,D=150;function ue(e,a){var i=_("var-icon");return g(),E("div",{ref:"freshNode",class:T(e.n()),onTouchstart:a[0]||(a[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchmove:a[1]||(a[1]=function(){return e.touchMove&&e.touchMove(...arguments)}),onTouchend:a[2]||(a[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:a[3]||(a[3]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[q("div",{class:T(e.classes(e.n("control"),"var-elevation--2",[e.isSuccess,e.n("control-success")])),style:X(e.controlStyle)},[Q(i,{name:e.iconName,transition:e.ICON_TRANSITION,class:T(e.classes(e.n("icon"),[e.refreshStatus==="loading"&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),Z(e.$slots,"default")],34)}const p=H({render:ue,name:"VarPullRefresh",components:{VarIcon:F},props:re,setup(e){var a,i,s=v(null),u=v(0),r=v(h),t=v("arrow-down"),n=v("default"),o=v(!1),c=v(!0),d=S(()=>n.value!=="loading"&&n.value!=="success"&&!e.disabled),k=S(()=>({transform:"translate3d(0px, "+r.value+"px, 0px) translate(-50%, 0)",transition:o.value?"transform "+e.animationDuration+"ms":void 0,background:y.value?e.successBgColor:e.bgColor,color:y.value?e.successColor:e.color})),y=S(()=>n.value==="success"),P=()=>new Promise(l=>{window.setTimeout(()=>{c.value=!0,l()},D)}),B=l=>{!d.value||(n.value="pulling",u.value=l.touches[0].clientY)},O=l=>{var f=G(a);if(!(f>0||!d.value)){f===0&&r.value>h&&l.cancelable&&l.preventDefault();var w=(l.touches[0].clientY-u.value)/2+h;r.value=w>=m?m:w,r.value>=m*.2?(c.value=!1,t.value="refresh",i=P()):t.value="arrow-down"}},L=function(){var l=te(function*(){if(!!d.value)if(o.value=!0,r.value>=m*.2){var f;yield i,n.value="loading",r.value=m*.3,(f=e["onUpdate:modelValue"])==null||f.call(e,!0),e.onRefresh==null||e.onRefresh()}else n.value="loosing",t.value="arrow-down",r.value=h,setTimeout(()=>{o.value=!1},N(e.animationDuration))});return function(){return l.apply(this,arguments)}}(),A=()=>{setTimeout(()=>{n.value="default",t.value="arrow-down",o.value=!1},N(e.animationDuration))};return Y(()=>e.modelValue,l=>{l===!1&&(o.value=!0,n.value="success",t.value="checkbox-marked-circle",setTimeout(()=>{r.value=h,A()},N(e.successDuration)))}),V(()=>{a=U(s.value)}),{n:oe,classes:se,iconHasChanged:c,ICON_TRANSITION:D,refreshStatus:n,freshNode:s,touchStart:B,touchMove:O,touchEnd:L,iconName:t,controlStyle:k,isSuccess:y}}});p.install=function(e){e.component(p.name,p)};const le={setup(e){const a=Array(10).fill("List Item"),i=Array(10).fill("This is new List Item"),s=v(!1),u=v(a),r=()=>{setTimeout(()=>{u.value=u.value[0]==="List Item"?i:a,s.value=!1},2e3)},t=n=>{n.preventDefault()};return V(()=>{document.body.addEventListener("touchmove",t,{passive:!1})}),K(()=>{document.body.removeEventListener("touchmove",t)}),ae(ee),ne(),(n,o)=>(g(),C(b(p),{onRefresh:r,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=c=>s.value=c),"success-duration":"2000"},{default:I(()=>[(g(!0),E(x,null,W(u.value,(c,d)=>(g(),C(b(M),{key:d,border:""},{default:I(()=>[$(j(c+" "+(d+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},Te=J(le,[["__scopeId","data-v-33defa0a"]]);export{Te as default};
