import{d as me,a as U,r as fe,b as y,Z as u,as as d,X as B,w as G,o as ce,p as be,f as W,h as E,M as m,N as v,R as k,F as he,ai as ge,ah as J,O as Ve,Q as Se,q as ye,n as ke}from"./vue-router.esm-bundler-1cdb4ad3.js";import{a as M,j as Fe,e as F,n as Ne,c as Te,I as Ce}from"./shared-c5b4ee22.js";import{F as ze,u as Pe}from"./provide-2db49db1.js";function we(e){return["always","normal","never"].includes(e)}var t;(function(e){e.First="1",e.Second="2"})(t||(t={}));var Le={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:we},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:M(),onStart:M(),onEnd:M(),"onUpdate:modelValue":M()},{n:K,classes:Me}=Te("slider"),pe=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function De(e,C){var g=be("var-form-details");return W(),E("div",{class:v(e.n())},[m("div",{class:v(e.classes(e.n("block"),[e.isDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")])),ref:"sliderEl",onClick:C[0]||(C[0]=function(){return e.click&&e.click(...arguments)})},[m("div",{class:v(e.n("track"))},[m("div",{class:v(e.n("track-background")),style:k({background:e.trackColor,height:e.multiplySizeUnit(e.trackHeight)})},null,6),m("div",{class:v(e.n("track-fill")),style:k(e.getFillStyle)},null,6)],2),(W(!0),E(he,null,ge(e.thumbList,i=>(W(),E("div",{class:v(e.n("thumb")),key:i.enumValue,style:k({left:i.value+"%",zIndex:e.thumbsProps[i.enumValue].active?1:void 0}),onTouchstart:J(f=>e.start(f,i.enumValue),["stop"]),onTouchmove:J(f=>e.move(f,i.enumValue),["stop"]),onTouchend:f=>e.end(i.enumValue),onTouchcancel:f=>e.end(i.enumValue)},[Ve(e.$slots,"button",{currentValue:i.text},()=>[m("div",{class:v(e.n("thumb-block")),style:k({background:e.thumbColor})},null,6),m("div",{class:v(e.classes(e.n("thumb-ripple"),[e.thumbsProps[i.enumValue].active,e.n("thumb-ripple--active")])),style:k({background:e.thumbColor})},null,6),m("div",{class:v(e.classes(e.n("thumb-label"),[e.showLabel(i.enumValue),e.n("thumb-label--active")])),style:k({background:e.labelColor,color:e.labelTextColor,height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2),width:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2)})},[m("span",null,Se(i.text),1)],6)])],46,pe))),128))],2),ye(g,{"error-message":e.errorMessage,class:v(e.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)}var Y=me({name:"VarSlider",components:{VarFormDetails:ze},props:Le,setup(e){var{bindForm:C,form:g}=Pe(),{errorMessage:i,validateWithTrigger:f,validate:x,resetValidation:I}=Fe(),_=()=>x(e.rules,e.modelValue),X=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),ee=()=>ke(()=>f(["onChange"],"onChange",e.rules,e.modelValue)),p=U(null),c=U(0),z=U(!1),n=fe({[t.First]:X(),[t.Second]:X()}),D=y(()=>u(e.max)-u(e.min)),b=y(()=>c.value/D.value*u(e.step)),ae=y(()=>{var{modelValue:a,range:r}=e,l=[];return r&&d(a)?l=[{value:V(a[0]),enumValue:t.First,text:T(a[0])},{value:V(a[1]),enumValue:t.Second,text:T(a[1])}]:B(a)&&(l=[{value:V(a),enumValue:t.First,text:T(a)}]),l}),re=y(()=>{var{activeColor:a,range:r,modelValue:l}=e,s=r&&d(l)?V(Math.min(l[0],l[1])):0,o=r&&d(l)?V(Math.max(l[0],l[1]))-s:V(l);return{width:o+"%",left:s+"%",background:a}}),N=y(()=>e.disabled||(g==null?void 0:g.disabled.value)),P=y(()=>e.readonly||(g==null?void 0:g.readonly.value)),le=a=>e.labelVisible==="always"?!0:e.labelVisible==="never"?!1:n[a].active,V=a=>{var{min:r,max:l}=e;return a<u(r)?0:a>u(l)?100:(a-u(r))/D.value*100},T=a=>{if(!B(a))return 0;var r=a;r<Number(e.min)&&(r=Number(e.min)),r>Number(e.max)&&(r=Number(e.max));var l=parseInt(""+r,10)===r;return l?r:u(r.toPrecision(5))},$=(a,r)=>{var l=[],{step:s,range:o,modelValue:h,onChange:w,min:S}=e,O=u(s),Q=Math.round(a/b.value),L=Q*O+u(S),ve=n[r].percentValue*O+u(S);if(n[r].percentValue=Q,o&&d(h)&&(l=r===t.First?[L,h[1]]:[h[0],L]),ve!==L){var Z=o?l.map(de=>T(de)):T(L);F(w,Z),F(e["onUpdate:modelValue"],Z),ee()}},te=a=>{if(!e.range)return t.First;var r=n[t.First].percentValue*b.value,l=n[t.Second].percentValue*b.value,s=Math.abs(a-r),o=Math.abs(a-l);return s<=o?t.First:t.Second},ne=(a,r)=>{c.value||(c.value=p.value.offsetWidth),!(N.value||P.value)&&(F(e.onStart),z.value=!0,n[r].startPosition=a.touches[0].clientX)},ue=(a,r)=>{if(!(N.value||P.value||!z.value)){var l=a.touches[0].clientX-n[r].startPosition+n[r].currentLeft;n[r].active=!0,l<=0?l=0:l>=c.value&&(l=c.value),$(l,r)}},H=a=>{var{range:r,modelValue:l,onEnd:s,step:o,min:h}=e;if(!(N.value||P.value)){var w=[];n[a].currentLeft=n[a].percentValue*b.value,n[a].active=!1;var S=n[a].percentValue*u(o)+u(h);r&&d(l)&&(w=a===t.First?[S,l[1]]:[l[0],S]),F(s,r?w:S),z.value=!1}},ie=a=>{if(!(N.value||P.value)&&!a.target.closest("."+K("thumb"))){var r=a.clientX-Ce(a.currentTarget),l=te(r);$(r,l),H(l)}},R=()=>{var a=u(e.step);return isNaN(a)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):a<0?(console.warn('[Varlet] Slider: "step" should be > 0'),!1):!0},j=()=>{var{range:a,modelValue:r}=e;return a&&!d(r)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!a&&d(r)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):a&&d(r)&&r.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},q=function(a,r){a===void 0&&(a=e.modelValue),r===void 0&&(r=u(e.step));var l=s=>{var{min:o,max:h}=e;return s<u(o)?0:s>u(h)?D.value/r:(s-u(o))/r};e.range&&d(a)?(n[t.First].percentValue=l(a[0]),n[t.First].currentLeft=n[t.First].percentValue*b.value,n[t.Second].percentValue=l(a[1]),n[t.Second].currentLeft=n[t.Second].percentValue*b.value):B(a)&&(n[t.First].currentLeft=l(a)*b.value)},se=()=>{var a=e.range?[0,0]:0;F(e["onUpdate:modelValue"],a),I()},oe={reset:se,validate:_,resetValidation:I};return F(C,oe),G([()=>e.modelValue,()=>e.step],a=>{var[r,l]=a;!R()||!j()||z.value||q(r,u(l))}),G(c,()=>q()),ce(()=>{!R()||!j()||(c.value=p.value.offsetWidth)}),{n:K,classes:Me,Thumbs:t,sliderEl:p,getFillStyle:re,isDisabled:N,errorMessage:i,thumbsProps:n,thumbList:ae,multiplySizeUnit:Ne,toNumber:u,showLabel:le,start:ne,move:ue,end:H,click:ie}}});Y.render=De;const A=Y;A.install=function(e){e.component(A.name,A)};export{A as S};
