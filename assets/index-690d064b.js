import{C as j}from"./cell-c7bd4e4d.js";import{I as J}from"./index-19d5ca99.js";import{a as P,x as K,y as W,c as X,C as x,e as D}from"./shared-c5b4ee22.js";import{d as ee,a as i,b as h,w as ae,o as M,e as A,p as te,f as g,h as U,M as re,q as oe,N as b,R as ne,O as se,Z as C,_ as le,aE as ue,i as V,S as k,ao as L,ai as ie,P as ve,Q as ce,F as de}from"./vue-router.esm-bundler-1cdb4ad3.js";import{d as fe}from"./index-404bdbb6.js";import{u as me}from"./sync-ff73d84a.js";/* empty css                  *//* empty css             */import"./CellSfc-4ed993c7.js";import"./index-10e817da.js";import"./index-4f06d85d.js";import"./_commonjsHelpers-725317a4.js";var he={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:P(),"onUpdate:modelValue":P()};function B(e,t,v,s,l,c,u){try{var r=e[c](u),o=r.value}catch(n){v(n);return}r.done?t(o):Promise.resolve(o).then(s,l)}function ge(e){return function(){var t=this,v=arguments;return new Promise(function(s,l){var c=e.apply(t,v);function u(o){B(c,s,l,u,r,"next",o)}function r(o){B(c,s,l,u,r,"throw",o)}u(void 0)})}}var{n:O,classes:pe}=X("pull-refresh"),Y=150;function ye(e,t){var v=te("var-icon");return g(),U("div",{ref:"freshNode",class:b(e.n()),onTouchstart:t[0]||(t[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchend:t[1]||(t[1]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:t[2]||(t[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[re("div",{ref:"controlNode",class:b(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:ne(e.controlStyle)},[oe(v,{name:e.iconName,transition:e.ICON_TRANSITION,class:b(e.classes(e.n("icon"),[e.refreshStatus==="loading"&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),se(e.$slots,"default")],34)}var $=ee({name:"VarPullRefresh",components:{VarIcon:J},props:he,setup(e){var t,v,s=i(0),l=i(null),c=i(null),u=i(0),r=i(-999),o=i("arrow-down"),n=i("default"),d=i(!1),E=0,y=0,S=i(!0),I=h(()=>n.value!=="loading"&&n.value!=="success"&&!e.disabled),z=h(()=>({transform:"translate3d(0px, "+r.value+"px, 0px) translate(-50%, 0)",transition:d.value?"transform "+e.animationDuration+"ms":void 0,background:N.value?e.successBgColor:e.bgColor,color:N.value?e.successColor:e.color})),f=h(()=>Math.abs(2*s.value)),N=h(()=>n.value==="success"),F=()=>new Promise(a=>{window.setTimeout(()=>{S.value=!0,a()},Y)}),w=a=>{var m="classList"in t?t:document.body;m.classList[a](O()+"--lock")},G=a=>{E=a.touches[0].clientY,y=0},T=a=>{if(I.value){var m=x(t);if(!(m>0)){var R=m===0,Z=a.touches[0];y=Z.clientY-E,R&&y>=0&&a.preventDefault(),n.value!=="pulling"&&(n.value="pulling",u.value=a.touches[0].clientY),R&&r.value>s.value&&w("add");var _=(a.touches[0].clientY-u.value)/2+s.value;r.value=_>=f.value?f.value:_,r.value>=f.value*.2?(S.value=!1,o.value="refresh",v=F()):o.value="arrow-down"}}},H=function(){var a=ge(function*(){I.value&&(d.value=!0,r.value>=f.value*.2?(yield v,n.value="loading",r.value=f.value*.3,D(e["onUpdate:modelValue"],!0),D(e.onRefresh),w("remove")):(n.value="loosing",o.value="arrow-down",r.value=s.value,setTimeout(()=>{d.value=!1,w("remove")},C(e.animationDuration))))});return function(){return a.apply(this,arguments)}}(),q=()=>{var{width:a}=c.value.getBoundingClientRect();r.value=-(a+a*.25),s.value=-(a+a*.25)},Q=()=>{setTimeout(()=>{n.value="default",o.value="arrow-down",d.value=!1},C(e.animationDuration))};return ae(()=>e.modelValue,a=>{a===!1&&(d.value=!0,n.value="success",o.value="checkbox-marked-circle",setTimeout(()=>{r.value=s.value,Q()},C(e.successDuration)))}),M(()=>{var a;t=e.target?K(e.target,"PullRefresh"):W(l.value),q(),(a=l.value)==null||a.addEventListener("touchmove",T,{passive:!1})}),A(()=>{var a;(a=l.value)==null||a.removeEventListener("touchmove",T)}),{n:O,classes:pe,iconHasChanged:S,ICON_TRANSITION:Y,refreshStatus:n,freshNode:l,controlNode:c,touchStart:G,touchMove:T,touchEnd:H,iconName:o,controlStyle:z,isSuccess:N}}});$.render=ye;const p=$;p.install=function(e){e.component(p.name,p)};const Se={setup(e){const t=Array(10).fill("List Item"),v=Array(10).fill("This is new List Item"),s=i(!1),l=i(t),c=()=>{setTimeout(()=>{l.value=l.value[0]==="List Item"?v:t,s.value=!1},2e3)},u=r=>{r.preventDefault()};return M(()=>{document.body.addEventListener("touchmove",u,{passive:!1})}),A(()=>{document.body.removeEventListener("touchmove",u)}),ue(fe),me(),(r,o)=>(g(),V(L(p),{onRefresh:c,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value=n),"success-duration":"2000"},{default:k(()=>[(g(!0),U(de,null,ie(l.value,(n,d)=>(g(),V(L(j),{key:d,border:""},{default:k(()=>[ve(ce(n+" "+(d+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},ke=le(Se,[["__scopeId","data-v-eb197830"]]);export{ke as default};
