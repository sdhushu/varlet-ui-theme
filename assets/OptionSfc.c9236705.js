import{C as ge}from"./checkbox.f6587938.js";import{v as ke}from"./index.a7ee3f87.js";import{d as ae,a as c,b as V,w as I,p as M,ai as Se,D as Ve,f as v,h as C,M as m,N as s,R as k,i as H,aj as re,j as Q,O,P as ne,Q as B,q as z,S as K,F as Fe,ak as we,n as Ee}from"./vue-router.esm-bundler.61b845b6.js";import{G as Me,r as Oe,q as Be,H as Te,c as oe,u as $e,b as t,k as P,x as le,w as De}from"./shared.cb7db5ff.js";import{I as Ne}from"./index.11f29402.js";import{M as Pe}from"./menu.47c3cb0e.js";import{C as Ie}from"./index.aa0ddf1e.js";import{F as Ae,u as Ue}from"./provide.13fc0d2c.js";var se=Symbol("SELECT_BIND_OPTION_KEY"),ie=Symbol("SELECT_COUNT_OPTION_KEY");function Ye(){var{bindChildren:e,childProviders:a}=Oe(se),{length:u}=Me(ie);return{length:u,options:a,bindOptions:e}}function Le(){var{bindParent:e,parentProvider:a}=Be(se),{index:u}=Te(ie);if(!e||!a)throw Error("<var-option/> must in <var-select/>");return{index:u,select:a,bindSelect:e}}var We={label:{},value:{}},{n:Re,classes:ze}=oe("option");function Ke(e,a){var u=M("var-checkbox"),b=Se("ripple");return Ve((v(),C("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.optionSelected,e.n("--selected-color")])),style:k({width:e.wrapWidth,color:e.optionSelected?e.focusColor:void 0}),onClick:a[2]||(a[2]=function(){return e.handleClick&&e.handleClick(...arguments)})},[m("div",{class:s(e.classes(e.n("cover"),[e.optionSelected,e.n("--selected-background")])),style:k({background:e.optionSelected?e.focusColor:void 0})},null,6),e.multiple?(v(),H(u,{key:0,ref:"checkbox","checked-color":e.focusColor,modelValue:e.optionSelected,"onUpdate:modelValue":a[0]||(a[0]=y=>e.optionSelected=y),onClick:a[1]||(a[1]=re(()=>{},["stop"])),onChange:e.handleSelect},null,8,["checked-color","modelValue","onChange"])):Q("v-if",!0),m("div",{class:s(e.classes(e.n("text"),e.n("$--ellipsis")))},[O(e.$slots,"default",{},()=>[ne(B(e.label),1)])],2)],6)),[[b]])}const j=ae({render:Ke,name:"VarOption",directives:{Ripple:ke},components:{VarCheckbox:ge},props:We,setup(e){var a=c(!1),u=V(()=>a.value),b=V(()=>e.label),y=V(()=>e.value),{select:g,bindSelect:f}=Le(),{wrapWidth:F,multiple:w,focusColor:A,onSelect:r}=g,U=()=>{a.value=!a.value,r(E)},h=()=>r(E),Y=L=>{a.value=L},E={label:b,value:y,selected:u,sync:Y};return I([()=>e.label,()=>e.value],()=>{if(e.label==null&&e.value==null)throw Error(`Props label and value can't both be undefined
`)},{immediate:!0}),f(E),{n:Re,classes:ze,optionSelected:a,wrapWidth:F,multiple:w,focusColor:A,handleClick:U,handleSelect:h}}});j.install=function(e){e.component(j.name,j)};function je(e){return["left","right","center"].includes(e)}var qe={modelValue:{default:void 0},placeholder:{type:String},multiple:{type:Boolean,default:!1},offsetY:{type:[String,Number],default:0},chip:{type:Boolean,default:!1},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},separator:{type:String,default:","},textAlign:{type:String,default:"left",validator:je},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onClose:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:q,classes:Ge}=oe("select"),He={key:0},Qe={key:1};function Je(e,a){var u=M("var-chip"),b=M("var-icon"),y=M("var-menu"),g=M("var-form-details");return v(),C("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.formDisabled||e.disabled,e.n("--disabled")])),onClick:a[3]||(a[3]=function(){return e.handleClick&&e.handleClick(...arguments)})},[m("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:k({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[m("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"prepend-icon")],2),m("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")])),ref:"wrapEl",onClick:a[2]||(a[2]=function(){return e.handleFocus&&e.handleFocus(...arguments)})},[z(y,{"var-select-cover":"",class:s(e.classes(e.n("menu"))),"offset-y":e.offsetY,disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled,"default-style":!1,show:e.isFocus,"onUpdate:show":a[1]||(a[1]=f=>e.isFocus=f),onClose:e.handleBlur},{menu:K(()=>[m("div",{ref:"menuEl",class:s(e.classes(e.n("scroller"),e.n("$-elevation--3")))},[O(e.$slots,"default")],2)]),default:K(()=>[m("div",{class:s(e.classes(e.n("select"),[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:k({textAlign:e.textAlign,color:e.textColor})},[e.multiple?(v(),C("div",He,[e.chip?(v(),C("div",{key:0,class:s(e.n("chips"))},[(v(!0),C(Fe,null,we(e.labels,f=>(v(),H(u,{class:s(e.n("chip")),"var-select-cover":"",closable:"",size:"small",type:e.errorMessage?"danger":void 0,key:f,onClick:a[0]||(a[0]=re(()=>{},["stop"])),onClose:()=>e.handleClose(f)},{default:K(()=>[ne(B(f),1)]),_:2},1032,["class","type","onClose"]))),128))],2)):(v(),C("div",{key:1,class:s(e.n("values"))},B(e.labels.join(e.separator)),3))])):(v(),C("span",Qe,B(e.label),1)),O(e.$slots,"arrow-icon",{focus:e.isFocus},()=>[z(b,{class:s(e.classes(e.n("arrow"),[e.isFocus,e.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])])],6),m("label",{class:s(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:k({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},B(e.placeholder),7)]),_:3},8,["class","offset-y","disabled","show","onClose"])],2),m("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"append-icon",{},()=>[e.clearable?(v(),H(b,{key:0,class:s(e.n("clear-icon")),name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):Q("v-if",!0)])],2)],6),e.line?(v(),C("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:k({background:e.errorMessage?void 0:e.blurColor})},[m("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:k({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):Q("v-if",!0),z(g,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const G=ae({render:Je,name:"VarSelect",components:{VarIcon:Ne,VarMenu:Pe,VarChip:Ie,VarFormDetails:Ae},props:qe,setup(e){var a=c(null),u=c(!1),b=V(()=>e.multiple),y=V(()=>e.focusColor),g=c(""),f=c([]),F=c("0px"),w=c(0),{bindForm:A,form:r}=Ue(),{length:U,options:h,bindOptions:Y}=Ye(),{errorMessage:E,validateWithTrigger:L,validate:ue,resetValidation:W}=$e(),de=c(null),te=()=>{var{multiple:n,modelValue:l}=e;if(n){var o=l;f.value=o.map(J)}!n&&!P(l)&&(g.value=J(l)),!n&&P(l)&&(g.value="")},S=n=>{Ee(()=>{var{validateTrigger:l,rules:o,modelValue:i}=e;L(l,n,o,i)})},T=n=>{var{value:l,label:o}=n;return l.value!=null?l.value:o.value},J=n=>{var l,o,i=h.find(p=>{var{value:d}=p;return d.value===n});return i||(i=h.find(p=>{var{label:d}=p;return d.value===n})),(l=(o=i)==null?void 0:o.label.value)!=null?l:""},ve=()=>{var{hint:n,modelValue:l}=e;if(!n&&!P(l))return q("--placeholder-hidden");if(n&&(!P(l)||u.value))return q("--placeholder-hint")},X=()=>a.value&&window.getComputedStyle(a.value).width||"0px",fe=()=>{var{disabled:n,readonly:l,onFocus:o}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||n||l||(F.value=X(),w.value=le(e.offsetY),u.value=!0,t(o),S("onFocus"))},me=()=>{var{disabled:n,readonly:l,onBlur:o}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||n||l||(t(o),S("onBlur"))},pe=n=>{var{disabled:l,readonly:o,multiple:i,onChange:p}=e;if(!(r!=null&&r.disabled.value||r!=null&&r.readonly.value||l||o)){var d=i?h.filter($=>{var{selected:D}=$;return D.value}).map(T):T(n);t(e["onUpdate:modelValue"],d),t(p,d),S("onChange"),!i&&(u.value=!1)}},be=()=>{var{disabled:n,readonly:l,multiple:o,clearable:i,onClear:p}=e;if(!(r!=null&&r.disabled.value||r!=null&&r.readonly.value||n||l||!i)){var d=o?[]:void 0;t(e["onUpdate:modelValue"],d),t(p,d),S("onClear")}},he=n=>{var{disabled:l,onClick:o}=e;r!=null&&r.disabled.value||l||(t(o,n),S("onClick"))},ce=n=>{var{disabled:l,readonly:o,modelValue:i,onClose:p}=e;if(!(r!=null&&r.disabled.value||r!=null&&r.readonly.value||l||o)){var d=i,$=h.find(R=>{var{label:N}=R;return N.value===n}),D=d.filter(R=>{var N;return R!==((N=$.value.value)!=null?N:$.label.value)});t(e["onUpdate:modelValue"],D),t(p,D),S("onClose")}},Z=()=>{var{multiple:n,modelValue:l}=e;if(n){var o=l;h.forEach(i=>i.sync(o.includes(T(i))))}else h.forEach(i=>i.sync(l===T(i)));te()},Ce=()=>{F.value=X(),w.value=le(e.offsetY),u.value=!0},ye=()=>{u.value=!1},_=()=>ue(e.rules,e.modelValue),x=()=>{t(e["onUpdate:modelValue"],e.multiple?[]:void 0),W()};I(()=>e.multiple,()=>{var{multiple:n,modelValue:l}=e;if(n&&!De(l))throw Error("The modelValue must be an array when multiple is true")}),I(()=>e.modelValue,Z,{deep:!0}),I(()=>U.value,Z);var ee={wrapWidth:V(()=>F.value),multiple:b,focusColor:y,onSelect:pe,reset:x,validate:_,resetValidation:W};return Y(ee),t(A,ee),{wrapEl:a,offsetY:w,isFocus:u,errorMessage:E,formDisabled:r==null?void 0:r.disabled,formReadonly:r==null?void 0:r.readonly,label:g,labels:f,menuEl:de,n:q,classes:Ge,computePlaceholderState:ve,handleFocus:fe,handleBlur:me,handleClear:be,handleClick:he,handleClose:ce,reset:x,validate:_,resetValidation:W,focus:Ce,blur:ye}}});G.install=function(e){e.component(G.name,G)};export{j as O,G as S};
