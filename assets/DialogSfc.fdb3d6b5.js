import{p as U,P as V}from"./popup.85f9f6fe.js";import{B as D}from"./index.4653a389.js";import{p as N,a as p,b as R,t as $,c as A,e as t,i as z,m as I,h as L,j as M}from"./shared.33d42a23.js";import{p as Q}from"./index.734f0786.js";import{d as q,a as k,w,p as b,f as g,i as y,S as h,M as f,N as i,O as T,P as v,Q as m,R as E,j as P,m as F,r as G,n as H}from"./vue-router.esm-bundler.d85fe05e.js";function O(){return O=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O.apply(this,arguments)}function J(e){return["left","center","right"].includes(e)}var K=O({show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:J},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},onBeforeClose:p(),onConfirm:p(),onCancel:p(),"onUpdate:show":p()},N(U,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));function B(){return B=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},B.apply(this,arguments)}var{n:W,classes:X}=A("dialog");function Y(e,l){var n=b("var-button"),o=b("var-popup");return g(),y(o,{class:i(e.n("popup")),"var-dialog-cover":"",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.popupCloseOnClickOverlay,teleport:e.teleport,onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange,onClickOverlay:e.handleClickOverlay},{default:h(()=>[f("div",F({class:e.classes(e.n("$--box"),e.n(),e.dialogClass),style:B({width:e.toSizeUnit(e.width)},e.dialogStyle)},e.$attrs),[f("div",{class:i(e.n("title"))},[T(e.$slots,"title",{},()=>[v(m(e.dt(e.title,e.pack.dialogTitle)),1)])],2),f("div",{class:i(e.n("message")),style:E({textAlign:e.messageAlign})},[T(e.$slots,"default",{},()=>[v(m(e.message),1)])],6),f("div",{class:i(e.n("actions"))},[e.cancelButton?(g(),y(n,{key:0,class:i(e.classes(e.n("button"),e.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":e.cancelButtonTextColor,color:e.cancelButtonColor,onClick:e.cancel},{default:h(()=>[v(m(e.dt(e.cancelButtonText,e.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):P("v-if",!0),e.confirmButton?(g(),y(n,{key:1,class:i(e.classes(e.n("button"),e.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":e.confirmButtonTextColor,color:e.confirmButtonColor,onClick:e.confirm},{default:h(()=>[v(m(e.dt(e.confirmButtonText,e.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):P("v-if",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}const s=q({render:Y,name:"VarDialog",components:{VarPopup:V,VarButton:D},inheritAttrs:!1,props:K,setup(e){var l=k(!1),n=k(!1),o=()=>t(e["onUpdate:show"],!1),u=()=>{var{closeOnClickOverlay:a,onClickOverlay:c,onBeforeClose:S}=e;if(t(c),!!a){if(S!=null){S("close",o);return}t(e["onUpdate:show"],!1)}},C=()=>{var{onBeforeClose:a,onConfirm:c}=e;if(t(c),a!=null){a("confirm",o);return}t(e["onUpdate:show"],!1)},j=()=>{var{onBeforeClose:a,onCancel:c}=e;if(t(c),a!=null){a("cancel",o);return}t(e["onUpdate:show"],!1)};return w(()=>e.show,a=>{l.value=a},{immediate:!0}),w(()=>e.closeOnClickOverlay,a=>{if(e.onBeforeClose!=null){n.value=!1;return}n.value=a},{immediate:!0}),{n:W,classes:X,pack:Q,dt:R,popupShow:l,popupCloseOnClickOverlay:n,handleClickOverlay:u,confirm:C,cancel:j,toSizeUnit:$}}});var r;function d(e){return z()?new Promise(l=>{d.close();var n=L(e)||M(e)?{message:String(e)}:e,o=G(n);o.teleport="body",r=o;var{unmountInstance:u}=I(s,o,{onConfirm:()=>{t(o.onConfirm),l("confirm")},onCancel:()=>{t(o.onCancel),l("cancel")},onClose:()=>{t(o.onClose),l("close")},onClosed:()=>{t(o.onClosed),u(),r===o&&(r=null)},onRouteChange:()=>{u(),r===o&&(r=null)},"onUpdate:show":C=>{o.show=C}});o.show=!0}):Promise.resolve()}s.install=function(e){e.component(s.name,s)};d.install=function(e){e.component(s.name,s)};d.close=()=>{if(r!=null){var e=r;r=null,H().then(()=>{e.show=!1})}};d.Component=s;export{d as D};
