import{d as ue,a as w,r as ie,b as p,Z as V,aA as d,w as X,o as se,p as oe,f as N,h as L,M as m,N as s,R as S,F as de,ak as ve,aj as I,O as me,Q as fe,q as he,n as be,X as ce}from"./vue-router.esm-bundler.90e8925a.js";import{u as ge,b as y,j as $,c as Se,B as Ve}from"./shared.b93193ef.js";import{F as ye,u as ze}from"./provide.06dca14c.js";function Fe(e){return["always","normal","never"].includes(e)}var pe={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:Fe},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:{type:Function},onStart:{type:Function},onEnd:{type:Function},"onUpdate:modelValue":{type:Function}};function P(){return P=Object.assign?Object.assign.bind():function(e){for(var v=1;v<arguments.length;v++){var i=arguments[v];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},P.apply(this,arguments)}var{n:ke,classes:Te}=Se("slider"),n;(function(e){e.First="1",e.Second="2"})(n||(n={}));var Ce=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function we(e,v){var i=oe("var-form-details");return N(),L("div",{class:s(e.n())},[m("div",{class:s(e.classes(e.n("block"),[e.isDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")])),style:S({height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,3),margin:e.thumbSize===void 0?e.thumbSize:"0 "+e.multiplySizeUnit(e.thumbSize,.5)}),ref:"sliderEl",onClick:v[0]||(v[0]=function(){return e.click&&e.click(...arguments)})},[m("div",{class:s(e.n("track"))},[m("div",{class:s(e.n("track-background")),style:S({background:e.trackColor,height:e.multiplySizeUnit(e.trackHeight)})},null,6),m("div",{class:s(e.n("track-fill")),style:S(e.getFillStyle)},null,6)],2),(N(!0),L(de,null,ve(e.thumbList,u=>(N(),L("div",{class:s(e.n("thumb")),key:u.enumValue,style:S({left:u.value+"%",zIndex:e.thumbsProps[u.enumValue].active?1:void 0}),onTouchstart:I(f=>e.start(f,u.enumValue),["stop"]),onTouchmove:I(f=>e.move(f,u.enumValue),["stop"]),onTouchend:f=>e.end(u.enumValue),onTouchcancel:f=>e.end(u.enumValue)},[me(e.$slots,"button",{currentValue:u.value},()=>[m("div",{class:s(e.n("thumb-block")),style:S({background:e.thumbColor,height:e.multiplySizeUnit(e.thumbSize),width:e.multiplySizeUnit(e.thumbSize)})},null,6),m("div",{class:s(e.classes(e.n("thumb-ripple"),[e.thumbsProps[u.enumValue].active,e.n("thumb-ripple--active")])),style:S(P({background:e.thumbColor},e.getRippleSize(u)))},null,6),m("div",{class:s(e.classes(e.n("thumb-label"),[e.showLabel(u.enumValue),e.n("thumb-label--active")])),style:S({background:e.labelColor,color:e.labelTextColor,height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2),width:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2)})},[m("span",null,fe(u.value),1)],6)])],46,Ce))),128))],6),he(i,{"error-message":e.errorMessage,class:s(e.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)}const M=ue({render:we,name:"VarSlider",components:{VarFormDetails:ye},props:pe,setup(e){var{bindForm:v,form:i}=ze(),{errorMessage:u,validateWithTrigger:f,validate:H,resetValidation:U}=ge(),q=()=>H(e.rules,e.modelValue),D=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),Q=()=>be(()=>f(["onChange"],"onChange",e.rules,e.modelValue)),C=w(null),h=w(0),k=w(!1),t=ie({[n.First]:D(),[n.Second]:D()}),b=p(()=>h.value/100*V(e.step)),Z=p(()=>{var a=[{value:e.modelValue,enumValue:n.First}];return e.range&&d(e.modelValue)&&(a=[{value:e.modelValue[0],enumValue:n.First},{value:e.modelValue[1],enumValue:n.Second}]),a}),G=a=>{var r;return e.thumbSize!==void 0&&(r=t[a.enumValue].active?$(e.thumbSize,3):"0px"),{height:r,width:r}},J=a=>e.labelVisible==="always"?!0:e.labelVisible==="never"?!1:t[a].active,K=p(()=>{var{activeColor:a,range:r,modelValue:l}=e,c=r&&d(l)?Math.abs(l[0]-l[1]):l,o=r&&d(l)?Math.min(l[0],l[1]):0;return{width:c+"%",left:o+"%",background:a}}),z=p(()=>e.disabled||(i==null?void 0:i.disabled.value)),T=p(()=>e.readonly||(i==null?void 0:i.readonly.value)),B=(a,r)=>{var l=[],{step:c,range:o,modelValue:g,onChange:le}=e,O=V(c),te=Math.round(a/b.value),F=te*O,ne=t[r].percentValue;if(t[r].percentValue=F/O,o&&d(g)&&(l=r===n.First?[F,g[1]]:[g[0],F]),ne!==F){var R=o?l:F;y(le,R),y(e["onUpdate:modelValue"],R),Q()}},Y=a=>{if(!e.range)return n.First;var r=t[n.First].percentValue*b.value,l=t[n.Second].percentValue*b.value,c=Math.abs(a-r),o=Math.abs(a-l);return c<=o?n.First:n.Second},x=(a,r)=>{h.value||(h.value=C.value.offsetWidth),!(z.value||T.value)&&(y(e.onStart),k.value=!0,t[r].startPosition=a.touches[0].clientX)},_=(a,r)=>{if(!(z.value||T.value||!k.value)){var l=a.touches[0].clientX-t[r].startPosition+t[r].currentLeft;t[r].active=!0,l<=0?l=0:l>=h.value&&(l=h.value),B(l,r)}},W=a=>{var{range:r,modelValue:l,onEnd:c}=e;if(!(z.value||T.value)){var o=[];t[a].currentLeft=t[a].percentValue*b.value,t[a].active=!1;var g=t[a].percentValue;r&&d(l)&&(o=a===n.First?[g,l[1]]:[l[0],g]),y(c,r?o:g),k.value=!1}},ee=a=>{if(!(z.value||T.value)&&!a.target.closest(".var-slider__thumb")){var r=a.clientX-Ve(a.currentTarget),l=Y(r);B(r,l),W(l)}},j=()=>{var a=V(e.step);return isNaN(a)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):a<1||a>100?(console.warn('[Varlet] Slider: "step" should be >= 0 and <= 100'),!1):parseInt(""+e.step,10)!==a?(console.warn('[Varlet] Slider: "step" should be an Integer'),!1):!0},A=()=>{var{range:a,modelValue:r}=e;return a&&!d(r)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!a&&d(r)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):a&&d(r)&&r.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},E=function(a,r){a===void 0&&(a=e.modelValue),r===void 0&&(r=V(e.step)),e.range&&d(a)?(t[n.First].percentValue=a[0]/r,t[n.First].currentLeft=t[n.First].percentValue*b.value,t[n.Second].percentValue=a[1]/r,t[n.Second].currentLeft=t[n.Second].percentValue*b.value):ce(a)&&(t[n.First].currentLeft=a/r*b.value)};X([()=>e.modelValue,()=>e.step],a=>{var[r,l]=a;!j()||!A()||k.value||E(r,V(l))}),X(h,()=>E()),se(()=>{!j()||!A()||(h.value=C.value.offsetWidth)});var ae=()=>{var a=e.range?[0,0]:0;y(e["onUpdate:modelValue"],a),U()},re={reset:ae,validate:q,resetValidation:U};return y(v,re),{n:ke,classes:Te,Thumbs:n,sliderEl:C,getFillStyle:K,isDisabled:z,errorMessage:u,thumbsProps:t,thumbList:Z,multiplySizeUnit:$,toNumber:V,getRippleSize:G,showLabel:J,start:x,move:_,end:W,click:ee}}});M.install=function(e){e.component(M.name,M)};export{M as S};
