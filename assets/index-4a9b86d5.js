import{C as j}from"./cell-26be02c3.js";import{I as J}from"./index-59b46fed.js";import{a as k,o as K,D as W,c as X,P as Z,k as T,N as x,O as ee,e as E}from"./shared-128c81f0.js";import{d as ae,a as i,b as h,w as te,p as re,f as g,h as Y,M as ne,q as oe,N as b,R as se,O as le,_ as ue,o as ie,e as ce,az as ve,i as V,S as _,ao as B,ai as de,P as fe,Q as me,F as he}from"./vue-router.esm-bundler-fa266481.js";import{d as ge}from"./index-404bdbb6.js";import{u as pe}from"./sync-1c3f49e5.js";/* empty css                  *//* empty css             */import"./CellSfc-4ed993c7.js";import"./index-c5f09b40.js";import"./index-085596df.js";import"./_commonjsHelpers-725317a4.js";var ye={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:k(),"onUpdate:modelValue":k()};function L(e,t,c,s,l,v,u){try{var r=e[v](u),n=r.value}catch(o){c(o);return}r.done?t(n):Promise.resolve(n).then(s,l)}function Se(e){return function(){var t=this,c=arguments;return new Promise(function(s,l){var v=e.apply(t,c);function u(n){L(v,s,l,u,r,"next",n)}function r(n){L(v,s,l,u,r,"throw",n)}u(void 0)})}}var{n:O,classes:Ne}=X("pull-refresh"),M=150;function we(e,t){var c=re("var-icon");return g(),Y("div",{ref:"freshNode",class:b(e.n()),onTouchstart:t[0]||(t[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchend:t[1]||(t[1]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:t[2]||(t[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[ne("div",{ref:"controlNode",class:b(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:se(e.controlStyle)},[oe(c,{name:e.iconName,transition:e.ICON_TRANSITION,class:b(e.classes(e.n("icon"),[e.refreshStatus==="loading"&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),le(e.$slots,"default")],34)}var A=ae({name:"VarPullRefresh",components:{VarIcon:J},props:ye,setup(e){var t,c,s=i(0),l=i(null),v=i(null),u=i(0),r=i(-999),n=i("arrow-down"),o=i("default"),d=i(!1),C=0,y=0,S=i(!0),I=h(()=>o.value!=="loading"&&o.value!=="success"&&!e.disabled),U=h(()=>({transform:"translate3d(0px, "+r.value+"px, 0px) translate(-50%, 0)",transition:d.value?"transform "+e.animationDuration+"ms":void 0,background:N.value?e.successBgColor:e.bgColor,color:N.value?e.successColor:e.color})),f=h(()=>Math.abs(2*s.value)),N=h(()=>o.value==="success"),z=()=>new Promise(a=>{window.setTimeout(()=>{S.value=!0,a()},M)}),w=a=>{var m="classList"in t?t:document.body;m.classList[a](O()+"--lock")},F=a=>{C=a.touches[0].clientY,y=0},P=a=>{if(I.value){var m=Z(t);if(!(m>0)){var R=m===0,Q=a.touches[0];y=Q.clientY-C,R&&y>=0&&a.preventDefault(),o.value!=="pulling"&&(o.value="pulling",u.value=a.touches[0].clientY),R&&r.value>s.value&&w("add");var D=(a.touches[0].clientY-u.value)/2+s.value;r.value=D>=f.value?f.value:D,r.value>=f.value*.2?(S.value=!1,n.value="refresh",c=z()):n.value="arrow-down"}}},G=function(){var a=Se(function*(){I.value&&(d.value=!0,r.value>=f.value*.2?(yield c,o.value="loading",r.value=f.value*.3,E(e["onUpdate:modelValue"],!0),E(e.onRefresh),w("remove")):(o.value="loosing",n.value="arrow-down",r.value=s.value,setTimeout(()=>{d.value=!1,w("remove")},T(e.animationDuration))))});return function(){return a.apply(this,arguments)}}(),H=()=>{var{width:a}=v.value.getBoundingClientRect();r.value=-(a+a*.25),s.value=-(a+a*.25)},$=()=>{t=e.target?x(e.target,"PullRefresh"):ee(l.value)},q=()=>{setTimeout(()=>{o.value="default",n.value="arrow-down",d.value=!1},T(e.animationDuration))};return te(()=>e.modelValue,a=>{a===!1&&(d.value=!0,o.value="success",n.value="checkbox-marked-circle",setTimeout(()=>{r.value=s.value,q()},T(e.successDuration)))}),K(()=>{$(),H()}),W(l,"touchmove",P),{n:O,classes:Ne,iconHasChanged:S,ICON_TRANSITION:M,refreshStatus:o,freshNode:l,controlNode:v,touchStart:F,touchMove:P,touchEnd:G,iconName:n,controlStyle:U,isSuccess:N}}});A.render=we;const p=A;p.install=function(e){e.component(p.name,p)};const Te={setup(e){const t=Array(10).fill("List Item"),c=Array(10).fill("This is new List Item"),s=i(!1),l=i(t),v=()=>{setTimeout(()=>{l.value=l.value[0]==="List Item"?c:t,s.value=!1},2e3)},u=r=>{r.preventDefault()};return ie(()=>{document.body.addEventListener("touchmove",u,{passive:!1})}),ce(()=>{document.body.removeEventListener("touchmove",u)}),ve(ge),pe(),(r,n)=>(g(),V(B(p),{onRefresh:v,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=o=>s.value=o),"success-duration":"2000"},{default:_(()=>[(g(!0),Y(he,null,de(l.value,(o,d)=>(g(),V(B(j),{key:d,border:""},{default:_(()=>[fe(me(o+" "+(d+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},Oe=ue(Te,[["__scopeId","data-v-eb197830"]]);export{Oe as default};
