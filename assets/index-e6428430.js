import{C as I}from"./cell-26be02c3.js";import{L as H}from"./index-d8f4ea61.js";import{v as Q}from"./index-c5f09b40.js";import{a as R,o as j,b as J,A as K,c as W,e as P,O as X,E as Y}from"./shared-128c81f0.js";import{p as Z}from"./index-7acf965d.js";import{d as _,a as M,u as ee,p as te,ag as ae,f as h,h as b,O as C,M as U,N as k,Q as f,q as u,j as V,D as ne,P as T,n as ie,r as re,aB as oe,ac as le,S as o,ao as t,as as L,F as w,ai as $,i as x}from"./vue-router.esm-bundler-fa266481.js";import{T as D,a as se,b as F,c as de}from"./TabSfc-70999840.js";import{p as c,u as ue}from"./index-eb35274d.js";import{u as fe}from"./sync-1c3f49e5.js";/* empty css               *//* empty css                *//* empty css             */import"./CellSfc-4ed993c7.js";/* empty css                  */import"./sticky-954ab3ea.js";/* empty css                  */import"./index-59b46fed.js";import"./index-085596df.js";import"./_commonjsHelpers-725317a4.js";import"./index-29656355.js";import"./useChildren-57fd1ce4.js";var me={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:R(),"onUpdate:loading":R(),"onUpdate:error":R()};function z(e,a,m,i,g,p,r){try{var l=e[p](r),s=l.value}catch(S){m(S);return}l.done?a(s):Promise.resolve(s).then(i,g)}function pe(e){return function(){var a=this,m=arguments;return new Promise(function(i,g){var p=e.apply(a,m);function r(s){z(p,i,g,r,l,"next",s)}function l(s){z(p,i,g,r,l,"throw",s)}r(void 0)})}}var{n:ge,classes:ve}=W("list");function ce(e,a){var m=te("var-loading"),i=ae("ripple");return h(),b("div",{class:k(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[C(e.$slots,"default"),e.loading?C(e.$slots,"loading",{key:0},()=>[U("div",{class:k(e.n("loading"))},[U("div",{class:k(e.n("loading-text"))},f(e.dt(e.loadingText,e.pack.listLoadingText)),3),u(m,{size:"mini",radius:10})],2)]):V("v-if",!0),e.finished?C(e.$slots,"finished",{key:1},()=>[U("div",{class:k(e.n("finished"))},f(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):V("v-if",!0),e.error?C(e.$slots,"error",{key:2},()=>[ne((h(),b("div",{class:k(e.n("error")),onClick:a[0]||(a[0]=function(){return e.load&&e.load(...arguments)})},[T(f(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[i]])]):V("v-if",!0),U("div",{class:k(e.n("detector")),ref:"detectorEl"},null,2)],2)}var G=_({name:"VarList",directives:{Ripple:Q},components:{VarLoading:H},props:me,setup(e){var a=M(null),m=M(null),i,g=()=>{P(e["onUpdate:error"],!1),P(e["onUpdate:loading"],!0),P(e.onLoad)},p=()=>{var l=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:s}=m.value.getBoundingClientRect();return Math.floor(s)-Y(e.offset)<=l},r=function(){var l=pe(function*(){yield ie();var{loading:s,finished:S,error:E}=e;!s&&!S&&!E&&p()&&g()});return function(){return l.apply(this,arguments)}}();return j(()=>{i=X(a.value),e.immediateCheck&&r(),i.addEventListener("scroll",r)}),ee(()=>{i.removeEventListener("scroll",r)}),{pack:Z,listEl:a,detectorEl:m,dt:J,isNumber:K,load:g,check:r,n:ge,classes:ve}}});G.render=ce;const B=G;B.install=function(e){e.component(B.name,B)};const Me={setup(e){const a=re({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:m,list2:i,list3:g,loading:p,loading2:r,loading3:l,finished:s,finished2:S,finished3:E,error:N,current:y}=oe(a),O=()=>{if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let v=0;v<20;v++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)},q=()=>{if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let v=0;v<20;v++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)},A=()=>{if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let v=0;v<20;v++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)};return le(ue),fe(),(v,d)=>(h(),b(w,null,[u(t(se),{active:t(y),"onUpdate:active":d[0]||(d[0]=n=>L(y)?y.value=n:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:o(()=>[u(t(D),null,{default:o(()=>[T(f(t(c).basicUsage),1)]),_:1}),u(t(D),null,{default:o(()=>[T(f(t(c).loadFail),1)]),_:1}),u(t(D),null,{default:o(()=>[T(f(t(c).tipText),1)]),_:1})]),_:1},8,["active"]),u(t(de),{active:t(y),"onUpdate:active":d[5]||(d[5]=n=>L(y)?y.value=n:null)},{default:o(()=>[u(t(F),null,{default:o(()=>[u(t(B),{finished:t(s),loading:t(p),"onUpdate:loading":d[1]||(d[1]=n=>L(p)?p.value=n:null),onLoad:O},{default:o(()=>[(h(!0),b(w,null,$(t(m),n=>(h(),x(t(I),{key:n},{default:o(()=>[T(f(t(c).listItem)+": "+f(n),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),u(t(F),null,{default:o(()=>[u(t(B),{finished:t(S),error:t(N),"onUpdate:error":d[2]||(d[2]=n=>L(N)?N.value=n:null),loading:t(r),"onUpdate:loading":d[3]||(d[3]=n=>L(r)?r.value=n:null),onLoad:q},{default:o(()=>[(h(!0),b(w,null,$(t(i),n=>(h(),x(t(I),{key:n},{default:o(()=>[T(f(t(c).listItem)+": "+f(n),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),u(t(F),null,{default:o(()=>[u(t(B),{"loading-text":t(c).loadingText,"finished-text":t(c).finishedText,"error-text":t(c).errorText,finished:t(E),loading:t(l),"onUpdate:loading":d[4]||(d[4]=n=>L(l)?l.value=n:null),onLoad:A},{default:o(()=>[(h(!0),b(w,null,$(t(g),n=>(h(),x(t(I),{key:n},{default:o(()=>[T(f(t(c).listItem)+": "+f(n),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{Me as default};
