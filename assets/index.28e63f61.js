import{d as be,a as C,b as re,w as ne,f as j,h as F,M as O,N as V,R as te,F as me,ak as he,Q as q,j as le,r as se,p as Ie,q as A,S as Y,i as pe,G as Ve,ao as Me,ap as He,an as v,P as K}from"./vue-router.esm-bundler.e1992e73.js";import{d as Q}from"./index.4f453859.js";import{j as h,c as ke,M as fe,b as ye}from"./shared.c1bcce9d.js";import{p as Z,u as Ue}from"./index.5dd20b6e.js";import{A as x}from"./AppType.61ca4727.js";/* empty css                  */import{a as Pe}from"./utils.d3fc41d2.js";import{u as Ne}from"./sync.636afef4.js";import"./_commonjsHelpers.b8add541.js";import"./index.9c303bc0.js";import"./AppType.vue_vue_type_style_index_0_lang.a72ea63f.js";var D=["12","1","2","3","4","5","6","7","8","9","10","11"],H=["00","13","14","15","16","17","18","19","20","21","22","23"],ge=["00","05","10","15","20","25","30","35","40","45","50","55"];function Ae(e){return["ampm","24hr"].includes(e)}var Re={modelValue:{type:String},elevation:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:Ae},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},"onUpdate:modelValue":{type:Function},onChange:{type:Function}},Se=(e,a)=>e==="24hr"||a==="am",ce=(e,a,o)=>{var n=D.findIndex(c=>h(c)===h(o)),u=Se(e,a)?o:H[n];return{hourStr:u,hourNum:h(u)}},P=e=>{var[a,o,n]=e.split(":");return{hour:h(a),minute:h(o),second:h(n)}},we=e=>{var a,o,{time:n,format:u,ampm:c,hour:b,max:d,min:I,disableHour:U}=e,{hourStr:L,hourNum:N}=ce(u,c,b),f=!1,p=!1;if(U.includes(L))return!0;if(d&&!I){var{hour:E,minute:G}=P(d);f=E===N&&n>G}if(!d&&I){var{hour:r,minute:l}=P(I);f=r===N&&n<l}if(d&&I){var{hour:m,minute:k}=P(d),{hour:S,minute:M}=P(I);f=S===N&&n<M||m===N&&n>k}return(a=e.allowedTime)!=null&&a.minutes&&(p=(o=e.allowedTime)==null?void 0:o.minutes(n)),f||p},Te=e=>{var a,o,{time:n,format:u,ampm:c,hour:b,minute:d,max:I,min:U,disableHour:L}=e,{hourStr:N,hourNum:f}=ce(u,c,b),p=!1,E=!1;if(L.includes(N))return!0;if(I&&!U){var{hour:G,minute:r,second:l}=P(I);p=G===f&&r<d||r===d&&n>l}if(!I&&U){var{hour:m,minute:k,second:S}=P(U);p=m===f&&k>d||k===d&&n>S}if(I&&U){var{hour:M,minute:R,second:B}=P(I),{hour:$,minute:z,second:J}=P(U);p=M===f&&R<d||$===f&&z>d||M===f&&R===d&&n>B||$===f&&z===d&&n<J}return(a=e.allowedTime)!=null&&a.seconds&&(E=(o=e.allowedTime)==null?void 0:o.seconds(n)),p||E},{n:Be,classes:$e}=ke("time-picker");function De(e,a){return j(),F("div",{class:V(e.n("clock"))},[O("div",{class:V(e.n("clock-hand")),style:te(e.handStyle)},null,6),(j(!0),F(me,null,he(e.timeScales,(o,n)=>(j(),F("div",{class:V(e.classes(e.n("clock-item"),[e.isActive(n,!1),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:te(e.getStyle(n,o,!1))},q(o),7))),128)),e.format==="24hr"&&e.type==="hour"?(j(),F("div",{key:0,class:V(e.n("clock-inner")),ref:"inner"},[(j(!0),F(me,null,he(e.hours24,(o,n)=>(j(),F("div",{class:V(e.classes(e.n("clock-item"),[e.isActive(n,!0),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:te(e.getStyle(n,o,!0))},q(o),7))),128))],2)):le("v-if",!0)],2)}const je=be({render:De,name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,a){var{emit:o}=a,n=C(null),u=C([]),c=C([]),b=re(()=>({transform:"rotate("+h(e.rad)+"deg)",height:e.isInner&&e.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:L(),borderColor:L()})),d=re(()=>{if(e.rad!==void 0){var r=e.rad/30;return r>=0?r:r+12}}),I=re(()=>e.type==="hour"?D:ge),U=(r,l)=>{var m;r=(m=r)!=null?m:e.type==="minute"?e.time.minute:e.time.second;var k=e.type==="minute"?we:Te,S={time:h(r),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:h(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:u.value};return l&&e.type==="minute"&&Reflect.deleteProperty(S,"minute"),k(S)},L=()=>{if(d.value===void 0)return e.color;var r=e.isInner?H[d.value]:I.value[d.value];return I.value===ge?U()?"#bdbdbd":e.color:f(r)?"#bdbdbd":e.color},N=(r,l)=>l?d.value===r&&e.isInner:d.value===r&&(!e.isInner||e.type!=="hour"),f=r=>{if(e.type==="hour"){if(Se(e.format,e.ampm))return u.value.includes(r);var l=D.findIndex(m=>m===r);return c.value.includes(l)}return U(r,!0)},p=(r,l,m)=>{var k=2*Math.PI/12*r-Math.PI/2,S=50*(1+Math.cos(k)),M=50*(1+Math.sin(k)),R=()=>N(r,m)?f(l)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:B,color:$}=R();return{left:S+"%",top:M+"%",backgroundColor:B,color:$}},E=()=>{var{width:r,height:l}=n.value.getBoundingClientRect();return{width:r,height:l}},G=()=>{if(d.value!==void 0){var r=e.ampm==="am"?D:H;return fe(r[d.value],2,"0")}};return ne([d,()=>e.isInner],(r,l)=>{var[m,k]=r,[S,M]=l,R=m===S&&k===M;if(!(R||e.type!=="hour"||d.value===void 0)){var B=k?H[d.value]:G(),$=e.useSeconds?":"+e.time.second:"",z=B+":"+e.time.minute+$;e.preventNextUpdate||o("update",z),o("change-prevent-update")}}),ne(()=>e.rad,(r,l)=>{if(!(e.type==="hour"||r===void 0||l===void 0)){var m=r/6>=0?r/6:r/6+60,k=l/6>=0?l/6:l/6+60;if(m!==k){var S,{hourStr:M}=ce(e.format,e.ampm,e.time.hour);if(e.type==="minute"){var R=Q().minute(m).format("mm"),B=e.useSeconds?":"+e.time.second:"";S=M+":"+R+B}if(e.type==="second"){var $=Q().second(m).format("ss"),z=e.useSeconds?":"+$:"";S=M+":"+e.time.minute+z}o("update",S)}}}),ne([()=>e.max,()=>e.min,()=>e.allowedTime],r=>{var[l,m,k]=r;if(u.value=[],l&&!m){var{hour:S}=P(l),M=D.filter(y=>h(y)>S),R=H.filter(y=>h(y)>S);u.value=[...M,...R]}if(!l&&m){var{hour:B}=P(m),$=D.filter(y=>h(y)<B),z=H.filter(y=>h(y)<B);u.value=[...$,...z]}if(l&&m){var{hour:J}=P(l),{hour:ee}=P(m),ue=D.filter(y=>h(y)<ee||h(y)>J),ie=H.filter(y=>h(y)<ee||h(y)>J);u.value=[...ue,...ie]}if(k!=null&&k.hours){var{hours:ae}=k,oe=D.filter(y=>!ae(h(y))),de=H.filter(y=>!ae(h(y)));u.value=[...new Set([...u.value,...oe,...de])]}c.value=u.value.map(y=>H.findIndex(ve=>y===ve)).filter(y=>y>=0)},{immediate:!0}),{n:Be,classes:$e,hours24:H,timeScales:I,inner:n,handStyle:b,disableHour:u,isActive:N,isDisable:f,getSize:E,getStyle:p,activeItemIndex:d}}});var{n:ze,classes:Fe}=ke("time-picker"),qe=e=>(Me(""),e=e(),He(),e),Le=qe(()=>O("span",null,":",-1)),Oe={key:0};function Ee(e,a){var o=Ie("clock");return j(),F("div",{class:V(e.classes(e.n(),[e.elevation,e.n("$-elevation--2")])),ref:"picker"},[O("div",{class:V(e.n("title")),style:te({background:e.headerColor||e.color})},[O("div",{class:V(e.n("title-time"))},[O("div",{class:V(e.classes(e.n("title-btn"),[e.type==="hour",e.n("title-btn--active")])),onClick:a[0]||(a[0]=n=>e.checkPanel("hour"))},q(e.time.hour),3),Le,O("div",{class:V(e.classes(e.n("title-btn"),[e.type==="minute",e.n("title-btn--active")])),onClick:a[1]||(a[1]=n=>e.checkPanel("minute"))},q(e.time.minute),3),e.useSeconds?(j(),F("span",Oe,":")):le("v-if",!0),e.useSeconds?(j(),F("div",{key:1,class:V(e.classes(e.n("title-btn"),[e.type==="second",e.n("title-btn--active")])),onClick:a[2]||(a[2]=n=>e.checkPanel("second"))},q(e.time.second),3)):le("v-if",!0)],2),e.format==="ampm"?(j(),F("div",{key:0,class:V(e.n("title-ampm"))},[O("div",{class:V(e.classes(e.n("title-btn"),[e.ampm==="am",e.n("title-btn--active")])),onClick:a[3]||(a[3]=n=>e.checkAmpm("am"))},"AM",2),O("div",{class:V(e.classes(e.n("title-btn"),[e.ampm==="pm",e.n("title-btn--active")])),onClick:a[4]||(a[4]=n=>e.checkAmpm("pm"))},"PM",2)],2)):le("v-if",!0)],6),O("div",{class:V(e.n("body"))},[O("div",{class:V(e.n("clock-container")),onTouchstart:a[5]||(a[5]=function(){return e.moveHand&&e.moveHand(...arguments)}),onTouchmove:a[6]||(a[6]=function(){return e.moveHand&&e.moveHand(...arguments)}),onTouchend:a[7]||(a[7]=function(){return e.end&&e.end(...arguments)}),ref:"container"},[A(Ve,{name:e.n()+"-panel-fade"},{default:Y(()=>[(j(),pe(o,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))]),_:1},8,["name"])],34)],2)],2)}const W=be({render:Ee,name:"VarTimePicker",components:{Clock:je},props:Re,setup(e){var a=C(null),o=C(null),n=C(null),u=C(!1),c=C(!1),b=C(!1),d=C(!1),I=C(!1),U=C(void 0),L=C(0),N=C(0),f=C("hour"),p=C("am"),E=C(!1),G=C(!1),r=C({hour:"00",minute:"00",second:"00"}),l=se({x:0,y:0}),m=se({x:[],y:[]}),k=re(()=>f.value==="hour"?U.value:f.value==="minute"?L.value:N.value),S=t=>{ye(e["onUpdate:modelValue"],t),ye(e.onChange,t)},M=t=>t*57.29577951308232,R=t=>{d.value=!1,G.value=!1,f.value=t},B=t=>{var{disableHour:i}=n.value,s=D.findIndex(w=>h(w)===h(r.value.hour)),g=t==="am"?D:H,T=[...g.slice(s),...g.slice(0,s)];return T.find((w,X)=>(c.value=X!==0,!i.includes(w)))},$=t=>{if(!e.readonly){p.value=t;var i=B(t);if(!!i){var s=e.useSeconds?":"+r.value.second:"",g=fe(i,2,"0")+":"+r.value.minute+s;S(g)}}},z=(t,i)=>{var s=t>=m.x[0]&&t<=m.x[1],g=i>=m.y[0]&&i<=m.y[1];return s&&g},J=t=>{var i=e.format==="24hr"?"HH":"hh",{hour:s,minute:g,second:T}=P(t);return{hour:Q().hour(s).format(i),minute:Q().minute(g).format("mm"),second:Q().second(T).format("ss")}},ee=t=>{var i=t/30;return i>=0?i:i+12},ue=()=>{var{width:t,height:i}=n.value.getSize(),s=l.x-t/2-8,g=l.x+t/2+8,T=l.y-i/2-8,w=l.y+i/2+8;return{rangeXMin:s,rangeXMax:g,rangeYMin:T,rangeYMax:w}},ie=(t,i,s)=>{var{disableHour:g}=n.value;b.value=z(t,i);var T=Math.round(s/30)*30+90,w=ee(T),X=u.value?D[w]:H[w];if(g.includes(X)||(u.value=e.format==="24hr"?z(t,i):!1),u.value===b.value){var _=u.value||p.value==="pm"?H[w]:D[w];E.value=g.includes(_),!E.value&&(U.value=T,d.value=!0)}},ae=t=>{var{disableHour:i}=n.value,s=Math.round(t/6)*6+90,g=s/6>=0?s/6:s/6+60,T={time:g,format:e.format,ampm:p.value,hour:r.value.hour,max:e.max,min:e.min,disableHour:i,allowedTime:e.allowedTime};G.value=we(T),!G.value&&(L.value=s,I.value=!0)},oe=t=>{var{disableHour:i}=n.value,s=Math.round(t/6)*6+90,g=s/6>=0?s/6:s/6+60,T={time:g,format:e.format,ampm:p.value,hour:r.value.hour,minute:h(r.value.minute),max:e.max,min:e.min,disableHour:i,allowedTime:e.allowedTime};Te(T)||(N.value=s)},de=()=>{var{left:t,top:i,width:s,height:g}=a.value.getBoundingClientRect();if(l.x=t+s/2,l.y=i+g/2,f.value==="hour"&&e.format==="24hr"){var{rangeXMin:T,rangeXMax:w,rangeYMin:X,rangeYMax:_}=ue();m.x=[T,w],m.y=[X,_]}},y=t=>{if(t.preventDefault(),!e.readonly){de();var{clientX:i,clientY:s}=t.touches[0],g=i-l.x,T=s-l.y,w=Math.round(M(Math.atan2(T,g)));f.value==="hour"?ie(i,s,w):f.value==="minute"?ae(w):oe(w)}},ve=()=>{if(!e.readonly){if(f.value==="hour"&&d.value){f.value="minute";return}f.value==="minute"&&e.useSeconds&&I.value&&(f.value="second")}},Ce=()=>{c.value=!1};return ne(()=>e.modelValue,t=>{if(t){var{hour:i,minute:s,second:g}=P(t),T=Q().hour(i).format("hh"),w=Q().hour(i).format("HH"),X=Q().minute(s).format("mm"),_=Q().second(g).format("ss");U.value=(T==="12"?0:h(T))*30,L.value=h(X)*6,N.value=h(_)*6,r.value=J(t),e.format!=="24hr"&&(p.value=fe(""+i,2,"0")===w&&H.includes(w)?"pm":"am"),u.value=e.format==="24hr"&&H.includes(w)}},{immediate:!0}),{n:ze,classes:Fe,getRad:k,time:r,container:a,inner:n,picker:o,isInner:u,type:f,ampm:p,isPreventNextUpdate:c,moveHand:y,checkPanel:R,checkAmpm:$,end:ve,update:S,changePreventUpdate:Ce}}});W.install=function(e){e.component(W.name,W)};const aa={setup(e){const a=se({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22"}),o={hours:u=>u%2===0,minutes:u=>u%15!==0,seconds:u=>u%2!==0},n=u=>{console.log(u)};return Pe(Ue),Ne(),(u,c)=>(j(),F(me,null,[A(v(x),null,{default:Y(()=>[K(q(v(Z).basicUsage),1)]),_:1}),A(v(W),{modelValue:v(a).date,"onUpdate:modelValue":c[0]||(c[0]=b=>v(a).date=b)},null,8,["modelValue"]),A(v(x),null,{default:Y(()=>[K(q(v(Z).hour24),1)]),_:1}),A(v(W),{modelValue:v(a).date1,"onUpdate:modelValue":c[1]||(c[1]=b=>v(a).date1=b),format:"24hr",elevation:""},null,8,["modelValue"]),A(v(x),null,{default:Y(()=>[K(q(v(Z).showSecond),1)]),_:1}),A(v(W),{modelValue:v(a).date5,"onUpdate:modelValue":c[2]||(c[2]=b=>v(a).date5=b),format:"24hr","use-seconds":""},null,8,["modelValue"]),A(v(x),null,{default:Y(()=>[K(q(v(Z).readonly),1)]),_:1}),A(v(W),{modelValue:v(a).date2,"onUpdate:modelValue":c[3]||(c[3]=b=>v(a).date2=b),readonly:"",elevation:""},null,8,["modelValue"]),A(v(x),null,{default:Y(()=>[K(q(v(Z).timeLimit),1)]),_:1}),A(v(W),{modelValue:v(a).date3,"onUpdate:modelValue":c[4]||(c[4]=b=>v(a).date3=b),format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":o},null,8,["modelValue"]),A(v(x),null,{default:Y(()=>[K(q(v(Z).custom),1)]),_:1}),A(v(W),{modelValue:v(a).date4,"onUpdate:modelValue":c[5]||(c[5]=b=>v(a).date4=b),elevation:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22",onChange:n},null,8,["modelValue"])],64))}};export{aa as default};
