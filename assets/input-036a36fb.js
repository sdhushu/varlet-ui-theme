import{F as _,u as ee}from"./provide-982d6f56.js";import{I as ne}from"./index-59b46fed.js";import{a as d,l as b,n as ae,e as i,o as re,c as le,k as oe}from"./shared-128c81f0.js";import{d as se,a as y,z as ie,b as w,p as D,f,h,M as v,N as s,O as E,j as V,R as g,Q as de,i as ue,q as te,n as me}from"./vue-router.esm-bundler-fa266481.js";function fe(e){return["text","password","number"].includes(e)}var ve={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:fe},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:d(),onBlur:d(),onClick:d(),onClear:d(),onInput:d(),onChange:d(),"onUpdate:modelValue":d()},{n:k,classes:ge}=le("input"),pe=["id","disabled","type","value","maxlength","rows"],he=["id","disabled","type","value","maxlength"],be=["for"];function ye(e,a){var p=D("var-icon"),u=D("var-form-details");return f(),h("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:a[14]||(a[14]=function(){return e.handleClick&&e.handleClick(...arguments)})},[v("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[v("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[E(e.$slots,"prepend-icon")],2),v("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(f(),h("input",{key:0,class:s(e.n("autocomplete"))},null,2)):V("v-if",!0),e.textarea?(f(),h("textarea",{key:1,class:s(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:a[0]||(a[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:a[1]||(a[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:a[2]||(a[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:a[3]||(a[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:a[4]||(a[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onCompositionstart:a[5]||(a[5]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:a[6]||(a[6]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},`
        `,46,pe)):(f(),h("input",{key:2,class:s(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:a[7]||(a[7]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:a[8]||(a[8]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:a[9]||(a[9]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:a[10]||(a[10]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:a[11]||(a[11]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onCompositionstart:a[12]||(a[12]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:a[13]||(a[13]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},null,46,he)),v("label",{class:s(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},de(e.placeholder),15,be)],2),v("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[E(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(f(),ue(p,{key:0,class:s(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):V("v-if",!0)])],2)],6),e.line?(f(),h("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.blurColor})},[v("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):V("v-if",!0),te(u,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}var N=se({name:"VarInput",components:{VarIcon:ne,VarFormDetails:_},props:ve,setup(e){var a=y("var-input-"+ie().uid),p=y(null),u=y(!1),t=y(!1),z=w(()=>e.type==="number"?"text":e.type),P=w(()=>{var{maxlength:n,modelValue:r}=e;return n?b(r)?"0 / "+n:String(r).length+"/"+n:""}),{bindForm:$,form:o}=ee(),{errorMessage:O,validateWithTrigger:R,validate:U,resetValidation:C}=ae(),m=n=>{me(()=>{var{validateTrigger:r,rules:l,modelValue:B}=e;R(r,n,l,B)})},j=()=>{var{hint:n,modelValue:r}=e;if(!n&&(!b(r)||t.value))return k("--placeholder-hidden");if(n&&(!b(r)||u.value))return k("--placeholder-hint")},A=n=>{u.value=!0,i(e.onFocus,n),m("onFocus")},W=n=>{u.value=!1,i(e.onBlur,n),m("onBlur")},I=n=>{var r=n.target,{value:l}=r;return e.type==="number"&&(l=K(l)),Y(X(l))},q=()=>{t.value=!0},L=n=>{t.value&&(t.value=!1,n.target.dispatchEvent(new Event("input")))},Q=n=>{if(!t.value){var r=I(n);i(e["onUpdate:modelValue"],r),i(e.onInput,r,n),m("onInput")}},G=n=>{var r=I(n);i(e.onChange,r,n),m("onChange")},H=()=>{var{disabled:n,readonly:r,clearable:l,onClear:B}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||n||r||!l||(i(e["onUpdate:modelValue"],""),i(B,""),m("onClear"))},J=n=>{var{disabled:r,onClick:l}=e;o!=null&&o.disabled.value||r||(i(l,n),m("onClick"))},K=n=>{var r=n.indexOf("-"),l=n.indexOf(".");return r>-1&&(n=r===0?"-"+n.replace(/-/g,""):n.replace(/-/g,"")),l>-1&&(n=n.slice(0,l+1)+n.slice(l).replace(/\./g,"")),n.replace(/[^-0-9.]/g,"")},X=n=>e.modelModifiers.trim?n.trim():n,Y=n=>e.maxlength?n.slice(0,oe(e.maxlength)):n,Z=n=>{var{disabled:r,readonly:l}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||r||l||n.stopPropagation()},M=()=>{i(e["onUpdate:modelValue"],""),C()},S=()=>U(e.rules,e.modelValue),T=()=>{var n;(n=p.value)==null||n.focus()},c=()=>{p.value.blur()},x={reset:M,validate:S,resetValidation:C};return i($,x),re(()=>{e.autofocus&&T()}),{el:p,id:a,isFocus:u,isComposing:t,errorMessage:O,type:z,maxlengthText:P,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:k,classes:ge,isEmpty:b,computePlaceholderState:j,handleFocus:A,handleBlur:W,handleInput:Q,handleChange:G,handleClear:H,handleClick:J,handleTouchstart:Z,handleCompositionStart:q,handleCompositionEnd:L,validate:S,resetValidation:C,reset:M,focus:T,blur:c}}});N.render=ye;const F=N;F.install=function(e){e.component(F.name,F)};export{F as I};
