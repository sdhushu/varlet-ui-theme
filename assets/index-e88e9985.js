import{C as I}from"./cell-38ee58c5.js";import{L as K}from"./index-7a58b817.js";import{v as O}from"./index-c6a26488.js";import{a as R,v as Q,b as X,c as j,e as P,o as A}from"./shared-4a7fb7de.js";import{d as W,a as M,o as Y,u as Z,X as _,p as ee,ag as te,f as h,h as b,O as C,M as U,N as k,Q as u,q as f,j as V,D as ne,P as T,n as ae,r as ie,aJ as re,ac as oe,S as o,ao as t,aK as L,F as w,ai as $,i as x}from"./vue-router.esm-bundler-9b345358.js";import{p as le}from"./index-a7264297.js";import{T as D,a as se,b as F,c as de}from"./TabSfc-37befcf9.js";import{p as c,u as fe}from"./index-8bc9f716.js";import{u as ue}from"./sync-96faa7c8.js";/* empty css               *//* empty css                *//* empty css             */import"./CellSfc-4ed993c7.js";/* empty css                  */import"./sticky-444c38c2.js";/* empty css                  */import"./index-951ce32a.js";import"./index-7cf7163d.js";import"./_commonjsHelpers-725317a4.js";import"./index-90cccecc.js";var me={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:R(),"onUpdate:loading":R(),"onUpdate:error":R()};function z(e,n,m,i,g,p,r){try{var l=e[p](r),s=l.value}catch(S){m(S);return}l.done?n(s):Promise.resolve(s).then(i,g)}function pe(e){return function(){var n=this,m=arguments;return new Promise(function(i,g){var p=e.apply(n,m);function r(s){z(p,i,g,r,l,"next",s)}function l(s){z(p,i,g,r,l,"throw",s)}r(void 0)})}}var{n:ge,classes:ve}=j("list");function ce(e,n){var m=ee("var-loading"),i=te("ripple");return h(),b("div",{class:k(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[C(e.$slots,"default"),e.loading?C(e.$slots,"loading",{key:0},()=>[U("div",{class:k(e.n("loading"))},[U("div",{class:k(e.n("loading-text"))},u(e.dt(e.loadingText,e.pack.listLoadingText)),3),f(m,{size:"mini",radius:10})],2)]):V("v-if",!0),e.finished?C(e.$slots,"finished",{key:1},()=>[U("div",{class:k(e.n("finished"))},u(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):V("v-if",!0),e.error?C(e.$slots,"error",{key:2},()=>[ne((h(),b("div",{class:k(e.n("error")),onClick:n[0]||(n[0]=function(){return e.load&&e.load(...arguments)})},[T(u(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[i]])]):V("v-if",!0),U("div",{class:k(e.n("detector")),ref:"detectorEl"},null,2)],2)}var G=W({name:"VarList",directives:{Ripple:O},components:{VarLoading:K},props:me,setup(e){var n=M(null),m=M(null),i,g=()=>{P(e["onUpdate:error"],!1),P(e["onUpdate:loading"],!0),P(e.onLoad)},p=()=>{var l=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:s}=m.value.getBoundingClientRect();return Math.floor(s)-A(e.offset)<=l},r=function(){var l=pe(function*(){yield ae();var{loading:s,finished:S,error:N}=e;!s&&!S&&!N&&p()&&g()});return function(){return l.apply(this,arguments)}}();return Y(()=>{i=Q(n.value),e.immediateCheck&&r(),i.addEventListener("scroll",r)}),Z(()=>{i.removeEventListener("scroll",r)}),{pack:le,listEl:n,detectorEl:m,dt:X,isNumber:_,load:g,check:r,n:ge,classes:ve}}});G.render=ce;const B=G;B.install=function(e){e.component(B.name,B)};const Fe={setup(e){const n=ie({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:m,list2:i,list3:g,loading:p,loading2:r,loading3:l,finished:s,finished2:S,finished3:N,error:E,current:y}=re(n),q=()=>{if(n.current!==0){n.loading=!1;return}setTimeout(()=>{for(let v=0;v<20;v++)n.list.push(n.list.length+1);n.loading=!1,n.list.length>=60&&(n.finished=!0)},1e3)},H=()=>{if(n.current!==1){n.loading2=!1;return}setTimeout(()=>{if(n.list2.length===40){n.error=!0,n.loading2=!1;return}for(let v=0;v<20;v++)n.list2.push(n.list2.length+1);n.loading2=!1},1e3)},J=()=>{if(n.current!==2){n.loading3=!1;return}setTimeout(()=>{for(let v=0;v<20;v++)n.list3.push(n.list3.length+1);n.loading3=!1,n.list3.length>=60&&(n.finished3=!0)},1e3)};return oe(fe),ue(),(v,d)=>(h(),b(w,null,[f(t(se),{active:t(y),"onUpdate:active":d[0]||(d[0]=a=>L(y)?y.value=a:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:o(()=>[f(t(D),null,{default:o(()=>[T(u(t(c).basicUsage),1)]),_:1}),f(t(D),null,{default:o(()=>[T(u(t(c).loadFail),1)]),_:1}),f(t(D),null,{default:o(()=>[T(u(t(c).tipText),1)]),_:1})]),_:1},8,["active"]),f(t(de),{active:t(y),"onUpdate:active":d[5]||(d[5]=a=>L(y)?y.value=a:null)},{default:o(()=>[f(t(F),null,{default:o(()=>[f(t(B),{finished:t(s),loading:t(p),"onUpdate:loading":d[1]||(d[1]=a=>L(p)?p.value=a:null),onLoad:q},{default:o(()=>[(h(!0),b(w,null,$(t(m),a=>(h(),x(t(I),{key:a},{default:o(()=>[T(u(t(c).listItem)+": "+u(a),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),f(t(F),null,{default:o(()=>[f(t(B),{finished:t(S),error:t(E),"onUpdate:error":d[2]||(d[2]=a=>L(E)?E.value=a:null),loading:t(r),"onUpdate:loading":d[3]||(d[3]=a=>L(r)?r.value=a:null),onLoad:H},{default:o(()=>[(h(!0),b(w,null,$(t(i),a=>(h(),x(t(I),{key:a},{default:o(()=>[T(u(t(c).listItem)+": "+u(a),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),f(t(F),null,{default:o(()=>[f(t(B),{"loading-text":t(c).loadingText,"finished-text":t(c).finishedText,"error-text":t(c).errorText,finished:t(N),loading:t(l),"onUpdate:loading":d[4]||(d[4]=a=>L(l)?l.value=a:null),onLoad:J},{default:o(()=>[(h(!0),b(w,null,$(t(g),a=>(h(),x(t(I),{key:a},{default:o(()=>[T(u(t(c).listItem)+": "+u(a),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{Fe as default};
