import{C as z}from"./cell.bc201427.js";import{I as U}from"./index.f1637ca3.js";import{z as G,c as H,F as Y,j as N}from"./shared.c1bcce9d.js";import{d as q,a as i,b as h,w as Q,o as P,p as $,f as g,h as k,M as j,q as J,N as T,R as K,O as W,_ as X,e as Z,i as C,S as I,an as R,ak as _,P as x,Q as ee,F as ae}from"./vue-router.esm-bundler.e1992e73.js";/* empty css                  *//* empty css             */import"./CellSfc.90047be6.js";import{d as ne}from"./index.b9d01deb.js";import{b as oe}from"./utils.d3fc41d2.js";import{u as re}from"./sync.636afef4.js";import"./_commonjsHelpers.b8add541.js";var te={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},onRefresh:{type:Function},"onUpdate:modelValue":{type:Function}};function D(e,a,c,t,s,v,l){try{var n=e[v](l),o=n.value}catch(u){c(u);return}n.done?a(o):Promise.resolve(o).then(t,s)}function ue(e){return function(){var a=this,c=arguments;return new Promise(function(t,s){var v=e.apply(a,c);function l(o){D(v,t,s,l,n,"next",o)}function n(o){D(v,t,s,l,n,"throw",o)}l(void 0)})}}var{n:se,classes:le}=H("pull-refresh"),V=150;function ie(e,a){var c=$("var-icon");return g(),k("div",{ref:"freshNode",class:T(e.n()),onTouchstart:a[0]||(a[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchmove:a[1]||(a[1]=function(){return e.touchMove&&e.touchMove(...arguments)}),onTouchend:a[2]||(a[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:a[3]||(a[3]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[j("div",{ref:"controlNode",class:T(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:K(e.controlStyle)},[J(c,{name:e.iconName,transition:e.ICON_TRANSITION,class:T(e.classes(e.n("icon"),[e.refreshStatus==="loading"&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),W(e.$slots,"default")],34)}const p=q({render:ie,name:"VarPullRefresh",components:{VarIcon:U},props:te,setup(e){var a,c,t=i(0),s=i(null),v=i(null),l=i(0),n=i(-999),o=i("arrow-down"),u=i("default"),d=i(!1),y=i(!0),S=h(()=>u.value!=="loading"&&u.value!=="success"&&!e.disabled),B=h(()=>({transform:"translate3d(0px, "+n.value+"px, 0px) translate(-50%, 0)",transition:d.value?"transform "+e.animationDuration+"ms":void 0,background:w.value?e.successBgColor:e.bgColor,color:w.value?e.successColor:e.color})),m=h(()=>Math.abs(2*t.value)),w=h(()=>u.value==="success"),E=()=>new Promise(r=>{window.setTimeout(()=>{y.value=!0,r()},V)}),L=r=>{!S.value||(u.value="pulling",l.value=r.touches[0].clientY)},M=r=>{var f=Y(a);if(!(f>0||!S.value)){f===0&&n.value>t.value&&r.cancelable&&r.preventDefault();var b=(r.touches[0].clientY-l.value)/2+t.value;n.value=b>=m.value?m.value:b,n.value>=m.value*.2?(y.value=!1,o.value="refresh",c=E()):o.value="arrow-down"}},F=function(){var r=ue(function*(){if(!!S.value)if(d.value=!0,n.value>=m.value*.2){var f;yield c,u.value="loading",n.value=m.value*.3,(f=e["onUpdate:modelValue"])==null||f.call(e,!0),e.onRefresh==null||e.onRefresh()}else u.value="loosing",o.value="arrow-down",n.value=t.value,setTimeout(()=>{d.value=!1},N(e.animationDuration))});return function(){return r.apply(this,arguments)}}(),O=()=>{var{width:r}=v.value.getBoundingClientRect();n.value=-(r+r*.25),t.value=-(r+r*.25)},A=()=>{setTimeout(()=>{u.value="default",o.value="arrow-down",d.value=!1},N(e.animationDuration))};return Q(()=>e.modelValue,r=>{r===!1&&(d.value=!0,u.value="success",o.value="checkbox-marked-circle",setTimeout(()=>{n.value=t.value,A()},N(e.successDuration)))}),P(()=>{a=G(s.value),O()}),{n:se,classes:le,iconHasChanged:y,ICON_TRANSITION:V,refreshStatus:u,freshNode:s,controlNode:v,touchStart:L,touchMove:M,touchEnd:F,iconName:o,controlStyle:B,isSuccess:w}}});p.install=function(e){e.component(p.name,p)};const ce={setup(e){const a=Array(10).fill("List Item"),c=Array(10).fill("This is new List Item"),t=i(!1),s=i(a),v=()=>{setTimeout(()=>{s.value=s.value[0]==="List Item"?c:a,t.value=!1},2e3)},l=n=>{n.preventDefault()};return P(()=>{document.body.addEventListener("touchmove",l,{passive:!1})}),Z(()=>{document.body.removeEventListener("touchmove",l)}),oe(ne),re(),(n,o)=>(g(),C(R(p),{onRefresh:v,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=u=>t.value=u),"success-duration":"2000"},{default:I(()=>[(g(!0),k(ae,null,_(s.value,(u,d)=>(g(),C(R(z),{key:d,border:""},{default:I(()=>[x(ee(u+" "+(d+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},Te=X(ce,[["__scopeId","data-v-33defa0a"]]);export{Te as default};
