import{F as H,u as J}from"./provide.40761c70.js";import{I as K}from"./index.f1637ca3.js";import{k as p,u as L,b as u,c as X,j as Y}from"./shared.c1bcce9d.js";import{d as Z,a as b,z as c,b as x,o as _,p as S,f as t,h as g,M as m,N as s,O as w,j as C,R as f,Q as ee,i as ae,q as ne,n as le}from"./vue-router.esm-bundler.e1992e73.js";function re(e){return["text","password","number"].includes(e)}var oe={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:re},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:F,classes:se}=X("input"),ue=["id","disabled","type","value","maxlength","rows"],de=["id","disabled","type","value","maxlength"],ie=["for"];function te(e,n){var v=S("var-icon"),d=S("var-form-details");return t(),g("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:n[10]||(n[10]=function(){return e.handleClick&&e.handleClick(...arguments)})},[m("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:f({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[m("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[w(e.$slots,"prepend-icon")],2),m("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(t(),g("input",{key:0,class:s(e.n("autocomplete"))},null,2)):C("v-if",!0),e.textarea?(t(),g("textarea",{key:1,class:s(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:f({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:n[0]||(n[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[1]||(n[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[2]||(n[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[3]||(n[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[4]||(n[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},`
        `,46,ue)):(t(),g("input",{key:2,class:s(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:f({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:n[5]||(n[5]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:n[6]||(n[6]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:n[7]||(n[7]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:n[8]||(n[8]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:n[9]||(n[9]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},null,46,de)),m("label",{class:s(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:f({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},ee(e.placeholder),15,ie)],2),m("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[w(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(t(),ae(v,{key:0,class:s(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):C("v-if",!0)])],2)],6),e.line?(t(),g("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:f({background:e.errorMessage?void 0:e.blurColor})},[m("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:f({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):C("v-if",!0),ne(d,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const B=Z({render:te,name:"VarInput",components:{VarIcon:K,VarFormDetails:H},props:oe,setup(e){var n=b("var-input-"+c().uid),v=b(null),d=b(!1),D=x(()=>{var{maxlength:a,modelValue:l}=e;return a?p(l)?"0 / "+a:String(l).length+"/"+a:""}),{bindForm:N,form:o}=J(),{errorMessage:z,validateWithTrigger:$,validate:P,resetValidation:h}=L(),i=a=>{le(()=>{var{validateTrigger:l,rules:r,modelValue:y}=e;$(l,a,r,y)})},R=()=>{var{hint:a,modelValue:l}=e;if(!a&&!p(l))return F("--placeholder-hidden");if(a&&(!p(l)||d.value))return F("--placeholder-hint")},U=a=>{d.value=!0,u(e.onFocus,a),i("onFocus")},j=a=>{d.value=!1,u(e.onBlur,a),i("onBlur")},E=a=>{var l=a.target,{value:r}=l;r=V(k(r)),l.value=r,u(e["onUpdate:modelValue"],r),u(e.onInput,r,a),i("onInput")},A=a=>{var l=a.target,{value:r}=l;r=V(k(r)),l.value=r,u(e.onChange,r,a),i("onChange")},O=()=>{var{disabled:a,readonly:l,clearable:r,onClear:y}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||a||l||!r||(u(e["onUpdate:modelValue"],""),u(y,""),i("onClear"))},W=a=>{var{disabled:l,onClick:r}=e;o!=null&&o.disabled.value||l||(u(r,a),i("onClick"))},k=a=>e.modelModifiers.trim?a.trim():a,V=a=>e.maxlength?a.slice(0,Y(e.maxlength)):a,q=a=>{var{disabled:l,readonly:r}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||l||r||a.stopPropagation()},M=()=>{u(e["onUpdate:modelValue"],""),h()},I=()=>P(e.rules,e.modelValue),T=()=>{var a;(a=v.value)==null||a.focus()},Q=()=>{v.value.blur()},G={reset:M,validate:I,resetValidation:h};return u(N,G),_(()=>{e.autofocus&&T()}),{el:v,id:n,isFocus:d,errorMessage:z,maxlengthText:D,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:F,classes:se,isEmpty:p,computePlaceholderState:R,handleFocus:U,handleBlur:j,handleInput:E,handleChange:A,handleClear:O,handleClick:W,handleTouchstart:q,validate:I,resetValidation:h,reset:M,focus:T,blur:Q}}});B.install=function(e){e.component(B.name,B)};export{B as I};
