import{C as X}from"./cell.bd328a0e.js";import{S as te}from"./sticky.6aabc6cf.js";import{d as K,a as c,b,G as oe,f as h,i as q,S as C,M as U,O as Q,P as A,Q as v,m as se,au as le,w as ie,o as j,e as ue,h as I,F as J,ak as W,N as z,R as H,an as m,q as $}from"./vue-router.esm-bundler.d85fe05e.js";import{H as de,v as ce,s as ve,I as fe,c as Z,a as V,y as pe,e as L,l as Y,L as me,z as F,B as he,G as ye,C as ge,D as ke,E as be,M as Ce,q as Ie}from"./shared.33d42a23.js";/* empty css             */import"./CellSfc.90047be6.js";import{d as Te}from"./index.098dd72d.js";import{p as M,u as xe}from"./index.0b171f48.js";import{a as Be,b as Ee}from"./utils.2cef13e3.js";import{u as Ne}from"./sync.83941c14.js";import"./index.8b6b6a08.js";import"./_commonjsHelpers.b8add541.js";import"./index.734f0786.js";var ee=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),ae=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Ae(){var{bindChildren:e,childProviders:t}=ce(ee),{length:n}=de(ae);return{length:n,indexAnchors:t,bindIndexAnchors:e}}function Se(){var{parentProvider:e,bindParent:t}=ve(ee),{index:n}=fe(ae);if(!e||!t)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:n,indexBar:e,bindIndexBar:t}}var _e={index:{type:[Number,String]}},{n:we,classes:De}=Z("index-anchor");function Oe(e,t){return h(),q(le(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[U("div",se({class:e.n()},e.$attrs),[Q(e.$slots,"default",{},()=>[A(v(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const S=K({render:Oe,name:"VarIndexAnchor",components:{VarSticky:te},inheritAttrs:!1,props:_e,setup(e){var{index:t,indexBar:n,bindIndexBar:u}=Se(),i=c(0),a=c(!1),s=b(()=>e.index),r=c(null),{active:l,sticky:g,cssMode:w,stickyOffsetTop:k,zIndex:T}=n,D=()=>{!r.value||(i.value=r.value.$el?r.value.$el.offsetTop:r.value.offsetTop)},x=E=>{a.value=E},B={index:t,name:s,ownTop:i,setOwnTop:D,setDisabled:x};return u(B),{n:we,classes:De,name:s,anchorEl:r,active:l,sticky:g,zIndex:T,disabled:a,cssMode:w,stickyOffsetTop:k,Transition:oe}}});S.install=function(e){e.component(S.name,S)};var Pe={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()};function G(e,t,n,u,i,a,s){try{var r=e[a](s),l=r.value}catch(g){n(g);return}r.done?t(l):Promise.resolve(l).then(u,i)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(u,i){var a=e.apply(t,n);function s(l){G(a,u,i,s,r,"next",l)}function r(l){G(a,u,i,s,r,"throw",l)}s(void 0)})}}var{n:ze,classes:$e}=Z("index-bar"),Le=["onClick"];function Me(e,t){return h(),I("div",{class:z(e.n()),ref:"barEl"},[Q(e.$slots,"default"),U("ul",{class:z(e.n("anchor-list")),style:H({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),I(J,null,W(e.anchorNameList,n=>(h(),I("li",{key:n,class:z(e.classes(e.n("anchor-item"),[e.active===n,e.n("anchor-item--active")])),style:H({color:e.active===n&&e.highlightColor?e.highlightColor:""}),onClick:u=>e.anchorClick(n,!0)},v(n),15,Le))),128))],6)],2)}const _=K({render:Me,name:"VarIndexBar",props:Pe,setup(e){var{length:t,indexAnchors:n,bindIndexAnchors:u}=Ae(),i=c(""),a=c(null),s=c(null),r=c([]),l=c(),g=b(()=>e.sticky),w=b(()=>e.cssMode),k=b(()=>pe(e.stickyOffsetTop)),T=b(()=>e.zIndex),D={active:l,sticky:g,cssMode:w,stickyOffsetTop:k,zIndex:T};u(D);var x=d=>{var o=Ie(d)?d.name.value:d;o===l.value||o===void 0||(l.value=o,L(e.onChange,o))},B=()=>{var d=ye(a.value),o=a.value===window?document.body.scrollHeight:a.value.scrollHeight,{offsetTop:y}=s.value;n.forEach((f,p)=>{var O=f.ownTop.value,N=d-O+k.value-y,P=p===n.length-1?o:n[p+1].ownTop.value-f.ownTop.value;N>=0&&N<P&&!i.value&&(p&&!e.cssMode&&n[p-1].setDisabled(!0),f.setDisabled(!1),x(f))})},E=function(){var d=R(function*(o,y){var{offsetTop:f}=s.value;if(y&&L(e.onClick,o),o!==l.value){var p=n.find(P=>{var{name:re}=P;return o===re.value});if(!!p){var O=p.ownTop.value-k.value+f,N=ge(a.value);i.value=o,x(o),yield ke(a.value,{left:N,top:O,animation:be,duration:Y(e.duration)}),Ce(()=>{i.value=""})}}});return function(y,f){return d.apply(this,arguments)}}(),ne=d=>{me(()=>E(d))};return ie(()=>t.value,R(function*(){yield F(),n.forEach(d=>{var{name:o,setOwnTop:y}=d;o.value&&r.value.push(o.value),y()})})),j(R(function*(){yield F(),a.value=he(s.value),a.value.addEventListener("scroll",B)})),ue(()=>{L(a.value.removeEventListener,"scroll",B)}),{n:ze,classes:$e,barEl:s,active:l,zIndex:T,anchorNameList:r,toNumber:Y,scrollTo:ne,anchorClick:E}}});_.install=function(e){e.component(_.name,_)};const We={setup(e){const t=c([]),n=c("#e7edf7"),u=c("#2e67ba");j(()=>{for(let a=0;a<26;a++)t.value.push(String.fromCharCode(65+a))});const i=a=>{console.log(a)};return Be(xe),Ee(Te,a=>{n.value=a==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",u.value=a==="darkTheme"?"#3980e8":"#2e67ba"}),Ne(),(a,s)=>(h(),q(m(_),{onChange:i,duration:"300","sticky-offset-top":"14.4vw"},{default:C(()=>[(h(!0),I(J,null,W(t.value,r=>(h(),I("div",{key:r},[$(m(S),{index:r,class:"var-index-anchor__example",style:H({background:n.value,color:u.value})},{default:C(()=>[A(v(m(M).title)+" "+v(r),1)]),_:2},1032,["index","style"]),$(m(X),null,{default:C(()=>[A(v(r)+" "+v(m(M).text),1)]),_:2},1024),$(m(X),null,{default:C(()=>[A(v(r)+" "+v(m(M).text),1)]),_:2},1024)]))),128))]),_:1}))}};export{We as default};
