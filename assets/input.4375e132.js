import{F as H,u as J}from"./provide.9ad17e86.js";import{I as K}from"./index.f298cda6.js";import{a as u,n as p,u as X,e as d,c as Y,l as Z}from"./shared.b468a763.js";import{d as c,a as C,z as x,b as _,o as ee,p as w,f as m,h,M as f,N as s,O as D,j as B,R as v,Q as ae,i as le,q as re,n as ne}from"./vue-router.esm-bundler.dfdc86af.js";function oe(e){return["text","password","number"].includes(e)}var se={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:oe},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:u(),onBlur:u(),onClick:u(),onClear:u(),onInput:u(),onChange:u(),"onUpdate:modelValue":u()},{n:F,classes:de}=Y("input"),ue=["id","disabled","type","value","maxlength","rows"],ie=["id","disabled","type","value","maxlength"],te=["for"];function me(e,l){var g=w("var-icon"),i=w("var-form-details");return m(),h("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:l[10]||(l[10]=function(){return e.handleClick&&e.handleClick(...arguments)})},[f("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:v({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[D(e.$slots,"prepend-icon")],2),f("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(m(),h("input",{key:0,class:s(e.n("autocomplete"))},null,2)):B("v-if",!0),e.textarea?(m(),h("textarea",{key:1,class:s(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:v({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:l[0]||(l[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:l[1]||(l[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:l[2]||(l[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:l[3]||(l[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:l[4]||(l[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},`
        `,46,ue)):(m(),h("input",{key:2,class:s(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:v({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:l[5]||(l[5]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:l[6]||(l[6]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:l[7]||(l[7]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:l[8]||(l[8]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:l[9]||(l[9]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},null,46,ie)),f("label",{class:s(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:v({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},ae(e.placeholder),15,te)],2),f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[D(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),le(g,{key:0,class:s(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):B("v-if",!0)])],2)],6),e.line?(m(),h("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:v({background:e.errorMessage?void 0:e.blurColor})},[f("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:v({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):B("v-if",!0),re(i,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const V=c({render:me,name:"VarInput",components:{VarIcon:K,VarFormDetails:H},props:se,setup(e){var l=C("var-input-"+x().uid),g=C(null),i=C(!1),N=_(()=>{var{maxlength:a,modelValue:r}=e;return a?p(r)?"0 / "+a:String(r).length+"/"+a:""}),{bindForm:z,form:o}=J(),{errorMessage:P,validateWithTrigger:$,validate:R,resetValidation:b}=X(),t=a=>{ne(()=>{var{validateTrigger:r,rules:n,modelValue:y}=e;$(r,a,n,y)})},U=()=>{var{hint:a,modelValue:r}=e;if(!a&&!p(r))return F("--placeholder-hidden");if(a&&(!p(r)||i.value))return F("--placeholder-hint")},E=a=>{i.value=!0,d(e.onFocus,a),t("onFocus")},j=a=>{i.value=!1,d(e.onBlur,a),t("onBlur")},A=a=>{var r=a.target,{value:n}=r;n=M(k(n)),r.value=n,d(e["onUpdate:modelValue"],n),d(e.onInput,n,a),t("onInput")},O=a=>{var r=a.target,{value:n}=r;n=M(k(n)),r.value=n,d(e.onChange,n,a),t("onChange")},W=()=>{var{disabled:a,readonly:r,clearable:n,onClear:y}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||a||r||!n||(d(e["onUpdate:modelValue"],""),d(y,""),t("onClear"))},q=a=>{var{disabled:r,onClick:n}=e;o!=null&&o.disabled.value||r||(d(n,a),t("onClick"))},k=a=>e.modelModifiers.trim?a.trim():a,M=a=>e.maxlength?a.slice(0,Z(e.maxlength)):a,L=a=>{var{disabled:r,readonly:n}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||r||n||a.stopPropagation()},I=()=>{d(e["onUpdate:modelValue"],""),b()},T=()=>R(e.rules,e.modelValue),S=()=>{var a;(a=g.value)==null||a.focus()},Q=()=>{g.value.blur()},G={reset:I,validate:T,resetValidation:b};return d(z,G),ee(()=>{e.autofocus&&S()}),{el:g,id:l,isFocus:i,errorMessage:P,maxlengthText:N,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:F,classes:de,isEmpty:p,computePlaceholderState:U,handleFocus:E,handleBlur:j,handleInput:A,handleChange:O,handleClear:W,handleClick:q,handleTouchstart:L,validate:T,resetValidation:b,reset:I,focus:S,blur:Q}}});V.install=function(e){e.component(V.name,V)};export{V as I};
