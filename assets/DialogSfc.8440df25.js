import{p as P,P as V}from"./popup.4ed6a582.js";import{B as D}from"./index.1f493622.js";import{p as N,d as R,c as U,a as r,m as j}from"./shared.67abcef7.js";import{p as A}from"./index.7e98eda1.js";import{d as F,a as h,w as k,p as S,f as m,i as y,S as g,M as p,N as i,O as w,P as v,Q as f,R as $,j as b,m as z,at as I,r as M,n as Q,W,X}from"./vue-router.esm-bundler.94b4319d.js";function B(){return B=Object.assign?Object.assign.bind():function(o){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e])}return o},B.apply(this,arguments)}function q(o){return["left","center","right"].includes(o)}var E=B({show:{type:Boolean,default:!1},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:q},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},onBeforeClose:{type:Function},onConfirm:{type:Function},onCancel:{type:Function},"onUpdate:show":{type:Function},dialogClass:{type:String},dialogStyle:{type:Object}},N(P,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])),{n:G,classes:H}=U("dialog");function J(o,l){var n=S("var-button"),e=S("var-popup");return m(),y(e,{class:i(o.n("popup")),"var-dialog-cover":"",show:o.popupShow,overlay:o.overlay,"overlay-class":o.overlayClass,"overlay-style":o.overlayStyle,"lock-scroll":o.lockScroll,"close-on-click-overlay":o.popupCloseOnClickOverlay,teleport:o.teleport,onOpen:o.onOpen,onClose:o.onClose,onClosed:o.onClosed,onOpened:o.onOpened,onRouteChange:o.onRouteChange,onClickOverlay:o.handleClickOverlay},{default:g(()=>[p("div",z({class:o.classes("var--box",o.n(),o.dialogClass),style:o.dialogStyle},o.$attrs),[p("div",{class:i(o.n("title"))},[w(o.$slots,"title",{},()=>[v(f(o.dt(o.title,o.pack.dialogTitle)),1)])],2),p("div",{class:i(o.n("message")),style:$({textAlign:o.messageAlign})},[w(o.$slots,"default",{},()=>[v(f(o.message),1)])],6),p("div",{class:i(o.n("actions"))},[o.cancelButton?(m(),y(n,{key:0,class:i(o.classes(o.n("button"),o.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":o.cancelButtonTextColor,color:o.cancelButtonColor,onClick:o.cancel},{default:g(()=>[v(f(o.dt(o.cancelButtonText,o.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):b("v-if",!0),o.confirmButton?(m(),y(n,{key:1,class:i(o.classes(o.n("button"),o.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":o.confirmButtonTextColor,color:o.confirmButtonColor,onClick:o.confirm},{default:g(()=>[v(f(o.dt(o.confirmButtonText,o.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):b("v-if",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}const s=F({render:J,name:"VarDialog",components:{VarPopup:V,VarButton:D},inheritAttrs:!1,props:E,setup(o){var l=h(!1),n=h(!1),e=()=>r(o["onUpdate:show"],!1),u=()=>{var{closeOnClickOverlay:a,onClickOverlay:c,onBeforeClose:O}=o;if(r(c),!!a){if(O!=null){O("close",e);return}r(o["onUpdate:show"],!1)}},d=()=>{var{onBeforeClose:a,onConfirm:c}=o;if(r(c),a!=null){a("confirm",e);return}r(o["onUpdate:show"],!1)},T=()=>{var{onBeforeClose:a,onCancel:c}=o;if(r(c),a!=null){a("cancel",e);return}r(o["onUpdate:show"],!1)};return k(()=>o.show,a=>{l.value=a},{immediate:!0}),k(()=>o.closeOnClickOverlay,a=>{if(o.onBeforeClose!=null){n.value=!1;return}n.value=a},{immediate:!0}),{n:G,classes:H,pack:A,dt:R,popupShow:l,popupCloseOnClickOverlay:n,handleClickOverlay:u,confirm:d,cancel:T}}});var t;function C(o){return I()?new Promise(l=>{C.close();var n=W(o)||X(o)?{message:String(o)}:o,e=M(n);e.teleport="body",t=e;var{unmountInstance:u}=j(s,e,{onConfirm:()=>{e.onConfirm==null||e.onConfirm(),l("confirm")},onCancel:()=>{e.onCancel==null||e.onCancel(),l("cancel")},onClose:()=>{e.onClose==null||e.onClose(),l("close")},onClosed:()=>{e.onClosed==null||e.onClosed(),u(),t===e&&(t=null)},onRouteChange:()=>{u(),t===e&&(t=null)},"onUpdate:show":d=>{e.show=d}});e.show=!0}):Promise.resolve()}s.install=function(o){o.component(s.name,s)};C.install=function(o){o.component(s.name,s)};C.close=()=>{if(t!=null){var o=t;t=null,Q().then(()=>{o.show=!1})}};C.Component=s;export{C as D};
