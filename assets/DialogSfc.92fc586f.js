import{p as j,P as U}from"./popup.f75f31ab.js";import{B as V}from"./index.6a659628.js";import{p as D,a as N,t as R,c as A,b as r,m as $}from"./shared.c0b67846.js";import{p as z}from"./index.6f47cb53.js";import{d as F,a as S,w as k,p as w,f as C,i as g,S as y,M as p,N as i,O as b,P as f,Q as v,R as I,j as T,m as M,at as Q,r as W,n as X,W as q,X as E}from"./vue-router.esm-bundler.cc802ca4.js";function h(){return h=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}function G(e){return["left","center","right"].includes(e)}var H=h({show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:G},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},onBeforeClose:{type:Function},onConfirm:{type:Function},onCancel:{type:Function},"onUpdate:show":{type:Function},dialogClass:{type:String},dialogStyle:{type:Object}},D(j,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));function O(){return O=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O.apply(this,arguments)}var{n:J,classes:K}=A("dialog");function L(e,l){var n=w("var-button"),o=w("var-popup");return C(),g(o,{class:i(e.n("popup")),"var-dialog-cover":"",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.popupCloseOnClickOverlay,teleport:e.teleport,onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange,onClickOverlay:e.handleClickOverlay},{default:y(()=>[p("div",M({class:e.classes("var--box",e.n(),e.dialogClass),style:O({width:e.toSizeUnit(e.width)},e.dialogStyle)},e.$attrs),[p("div",{class:i(e.n("title"))},[b(e.$slots,"title",{},()=>[f(v(e.dt(e.title,e.pack.dialogTitle)),1)])],2),p("div",{class:i(e.n("message")),style:I({textAlign:e.messageAlign})},[b(e.$slots,"default",{},()=>[f(v(e.message),1)])],6),p("div",{class:i(e.n("actions"))},[e.cancelButton?(C(),g(n,{key:0,class:i(e.classes(e.n("button"),e.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":e.cancelButtonTextColor,color:e.cancelButtonColor,onClick:e.cancel},{default:y(()=>[f(v(e.dt(e.cancelButtonText,e.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):T("v-if",!0),e.confirmButton?(C(),g(n,{key:1,class:i(e.classes(e.n("button"),e.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":e.confirmButtonTextColor,color:e.confirmButtonColor,onClick:e.confirm},{default:y(()=>[f(v(e.dt(e.confirmButtonText,e.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):T("v-if",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}const s=F({render:L,name:"VarDialog",components:{VarPopup:U,VarButton:V},inheritAttrs:!1,props:H,setup(e){var l=S(!1),n=S(!1),o=()=>r(e["onUpdate:show"],!1),u=()=>{var{closeOnClickOverlay:a,onClickOverlay:c,onBeforeClose:B}=e;if(r(c),!!a){if(B!=null){B("close",o);return}r(e["onUpdate:show"],!1)}},m=()=>{var{onBeforeClose:a,onConfirm:c}=e;if(r(c),a!=null){a("confirm",o);return}r(e["onUpdate:show"],!1)},P=()=>{var{onBeforeClose:a,onCancel:c}=e;if(r(c),a!=null){a("cancel",o);return}r(e["onUpdate:show"],!1)};return k(()=>e.show,a=>{l.value=a},{immediate:!0}),k(()=>e.closeOnClickOverlay,a=>{if(e.onBeforeClose!=null){n.value=!1;return}n.value=a},{immediate:!0}),{n:J,classes:K,pack:z,dt:N,popupShow:l,popupCloseOnClickOverlay:n,handleClickOverlay:u,confirm:m,cancel:P,toSizeUnit:R}}});var t;function d(e){return Q()?new Promise(l=>{d.close();var n=q(e)||E(e)?{message:String(e)}:e,o=W(n);o.teleport="body",t=o;var{unmountInstance:u}=$(s,o,{onConfirm:()=>{o.onConfirm==null||o.onConfirm(),l("confirm")},onCancel:()=>{o.onCancel==null||o.onCancel(),l("cancel")},onClose:()=>{o.onClose==null||o.onClose(),l("close")},onClosed:()=>{o.onClosed==null||o.onClosed(),u(),t===o&&(t=null)},onRouteChange:()=>{u(),t===o&&(t=null)},"onUpdate:show":m=>{o.show=m}});o.show=!0}):Promise.resolve()}s.install=function(e){e.component(s.name,s)};d.install=function(e){e.component(s.name,s)};d.close=()=>{if(t!=null){var e=t;t=null,X().then(()=>{e.show=!1})}};d.Component=s;export{d as D};
