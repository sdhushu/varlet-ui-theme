import{F as ke,u as Fe}from"./provide-982d6f56.js";import{d as Ne,a as B,r as Te,b as k,ao as W,w as _,p as x,ag as Ce,f as A,h as E,M as h,N as d,R as F,F as we,ai as He,ah as ee,O as Pe,D as pe,q as re,Q as ze,n as Le}from"./vue-router.esm-bundler-fa266481.js";import{a as z,n as De,k as i,g as m,A as O,e as N,o as Me,w as Ue,c as Be,Z as We}from"./shared-128c81f0.js";import{H as Ae,a as Ee,u as ae}from"./index-fe11295e.js";function Oe(e){return["always","normal","never"].includes(e)}var n;(function(e){e.First="1",e.Second="2"})(n||(n={}));var Ie={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:Oe},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:z(),onStart:z(),onEnd:z(),"onUpdate:modelValue":z()},{n:le,classes:Xe}=Be("slider"),$e=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function Re(e,C){var V=x("var-hover-overlay"),L=x("var-form-details"),D=Ce("hover");return A(),E("div",{class:d(e.n())},[h("div",{class:d(e.classes(e.n("block"),[e.isDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")])),ref:"sliderEl",onClick:C[0]||(C[0]=function(){return e.click&&e.click(...arguments)})},[h("div",{class:d(e.n("track"))},[h("div",{class:d(e.n("track-background")),style:F({background:e.trackColor,height:e.multiplySizeUnit(e.trackHeight)})},null,6),h("div",{class:d(e.n("track-fill")),style:F(e.getFillStyle)},null,6)],2),(A(!0),E(we,null,He(e.thumbList,u=>(A(),E("div",{class:d(e.n("thumb")),key:u.enumValue,style:F({left:u.value+"%",zIndex:e.thumbsProps[u.enumValue].active?1:void 0}),onTouchstart:ee(v=>e.start(v,u.enumValue),["stop"]),onTouchmove:ee(v=>e.move(v,u.enumValue),["stop"]),onTouchend:v=>e.end(u.enumValue),onTouchcancel:v=>e.end(u.enumValue)},[Pe(e.$slots,"button",{currentValue:u.text},()=>[pe(h("div",{class:d(e.n("thumb-block")),style:F({background:e.thumbColor})},null,6),[[D,v=>e.hover(v,u),"desktop"]]),h("div",{class:d(e.classes(e.n("thumb-ripple"),[e.thumbsProps[u.enumValue].active,e.n("thumb-ripple--active")])),style:F({background:e.thumbsProps[u.enumValue].active?e.thumbColor:void 0})},[re(V,{hovering:u.hovering},null,8,["hovering"])],6),h("div",{class:d(e.classes(e.n("thumb-label"),[e.showLabel(u.enumValue),e.n("thumb-label--active")])),style:F({background:e.labelColor,color:e.labelTextColor,height:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2),width:e.thumbSize===void 0?e.thumbSize:e.multiplySizeUnit(e.thumbSize,2)})},[h("span",null,ze(u.text),1)],6)])],46,$e))),128))],2),re(L,{"error-message":e.errorMessage,class:d(e.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)}var ne=Ne({name:"VarSlider",components:{VarFormDetails:ke,VarHoverOverlay:Ae},directives:{Hover:Ee},props:Ie,setup(e){var{bindForm:C,form:V}=Fe(),{errorMessage:L,validateWithTrigger:D,validate:u,resetValidation:v}=De(),{hovering:X,handleHovering:$}=ae(),{hovering:te,handleHovering:ie}=ae(),ue=()=>u(e.rules,e.modelValue),R=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),oe=()=>Le(()=>D(["onChange"],"onChange",e.rules,e.modelValue)),M=B(null),c=B(0),w=B(!1),t=Te({[n.First]:R(),[n.Second]:R()}),U=k(()=>i(e.max)-i(e.min)),b=k(()=>c.value/U.value*i(e.step)),se=k(()=>{var{modelValue:r,range:a}=e,l=[];return a&&m(r)?l=[{value:S(r[0]),enumValue:n.First,text:T(r[0]),hovering:W(X),handleHovering:$},{value:S(r[1]),enumValue:n.Second,text:T(r[1]),hovering:W(te),handleHovering:ie}]:O(r)&&(l=[{value:S(r),enumValue:n.First,text:T(r),hovering:W(X),handleHovering:$}]),l}),ve=k(()=>{var{activeColor:r,range:a,modelValue:l}=e,o=a&&m(l)?S(Math.min(l[0],l[1])):0,s=a&&m(l)?S(Math.max(l[0],l[1]))-o:S(l);return{width:s+"%",left:o+"%",background:r}}),f=k(()=>e.disabled||(V==null?void 0:V.disabled.value)),H=k(()=>e.readonly||(V==null?void 0:V.readonly.value)),de=r=>e.labelVisible==="always"?!0:e.labelVisible==="never"?!1:t[r].active,S=r=>{var{min:a,max:l}=e;return r<i(a)?0:r>i(l)?100:(r-i(a))/U.value*100},T=r=>{if(!O(r))return 0;var a=r;a<Number(e.min)&&(a=Number(e.min)),a>Number(e.max)&&(a=Number(e.max));var l=parseInt(""+a,10)===a;return l?a:i(a.toPrecision(5))},me=(r,a)=>{f.value||a.handleHovering(r)},q=(r,a)=>{var l=[],{step:o,range:s,modelValue:g,onChange:P,min:y}=e,J=i(o),K=Math.round(r/b.value),p=K*J+i(y),Se=t[a].percentValue*J+i(y);if(t[a].percentValue=K,s&&m(g)&&(l=a===n.First?[p,g[1]]:[g[0],p]),Se!==p){var Y=s?l.map(ye=>T(ye)):T(p);N(P,Y),N(e["onUpdate:modelValue"],Y),oe()}},fe=r=>{if(!e.range)return n.First;var a=t[n.First].percentValue*b.value,l=t[n.Second].percentValue*b.value,o=Math.abs(r-a),s=Math.abs(r-l);return o<=s?n.First:n.Second},he=(r,a)=>{c.value||(c.value=M.value.offsetWidth),f.value||(t[a].active=!0),!(f.value||H.value)&&(N(e.onStart),w.value=!0,t[a].startPosition=r.touches[0].clientX)},ce=(r,a)=>{if(!(f.value||H.value||!w.value)){var l=r.touches[0].clientX-t[a].startPosition+t[a].currentLeft;l<=0?l=0:l>=c.value&&(l=c.value),q(l,a)}},Q=r=>{var{range:a,modelValue:l,onEnd:o,step:s,min:g}=e;if(f.value||(t[r].active=!1),!(f.value||H.value)){var P=[];t[r].currentLeft=t[r].percentValue*b.value;var y=t[r].percentValue*i(s)+i(g);a&&m(l)&&(P=r===n.First?[y,l[1]]:[l[0],y]),N(o,a?P:y),w.value=!1}},be=r=>{if(!(f.value||H.value)&&!r.target.closest("."+le("thumb"))){var a=r.clientX-We(r.currentTarget),l=fe(a);q(a,l),Q(l)}},Z=()=>{var r=i(e.step);return isNaN(r)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):r<0?(console.warn('[Varlet] Slider: "step" should be > 0'),!1):!0},j=()=>{var{range:r,modelValue:a}=e;return r&&!m(a)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!r&&m(a)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):r&&m(a)&&a.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},G=function(r,a){r===void 0&&(r=e.modelValue),a===void 0&&(a=i(e.step));var l=o=>{var{min:s,max:g}=e;return o<i(s)?0:o>i(g)?U.value/a:(o-i(s))/a};e.range&&m(r)?(t[n.First].percentValue=l(r[0]),t[n.First].currentLeft=t[n.First].percentValue*b.value,t[n.Second].percentValue=l(r[1]),t[n.Second].currentLeft=t[n.Second].percentValue*b.value):O(r)&&(t[n.First].currentLeft=l(r)*b.value)},ge=()=>{var r=e.range?[0,0]:0;N(e["onUpdate:modelValue"],r),v()},Ve={reset:ge,validate:ue,resetValidation:v};return N(C,Ve),_([()=>e.modelValue,()=>e.step],r=>{var[a,l]=r;!Z()||!j()||w.value||G(a,i(l))}),_(c,()=>G()),Me(()=>{!Z()||!j()||(c.value=M.value.offsetWidth)}),{n:le,classes:Xe,Thumbs:n,sliderEl:M,getFillStyle:ve,isDisabled:f,errorMessage:L,thumbsProps:t,thumbList:se,hover:me,multiplySizeUnit:Ue,toNumber:i,showLabel:de,start:he,move:ce,end:Q,click:be}}});ne.render=Re;const I=ne;I.install=function(e){e.component(I.name,I)};export{I as S};
