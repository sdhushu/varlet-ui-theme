import{I as A}from"./index.27bcfa75.js";import{F as E,u as L}from"./provide.f6089a49.js";import{v as P}from"./index.99ecac2e.js";import{u as X,b as m,t as N,j as i,c as G}from"./shared.683c68c7.js";import{d as H,p as R,ai as J,f as b,h,M as K,F as O,ak as Q,D as Y,R as k,N as c,q as F,n as Z}from"./vue-router.esm-bundler.94bfc301.js";var $={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:s}=G("rate"),_=["onClick"];function x(e,a){var v=R("var-icon"),d=R("var-form-details"),f=J("ripple");return b(),h("div",{class:c(e.n("wrap"))},[K("div",{class:c(e.n())},[(b(!0),h(O,null,Q(e.toNumber(e.count),n=>Y((b(),h("div",{key:n,style:k(e.getStyle(n)),class:c(e.getClass(n)),onClick:o=>e.handleClick(n,o)},[F(v,{class:c(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(n).name,style:k({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"])],14,_)),[[f,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]])),128))],2),F(d,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const C=H({render:x,name:"VarRate",components:{VarIcon:A,VarFormDetails:E},directives:{Ripple:P},props:$,setup(e){var{form:a,bindForm:v}=L(),{errorMessage:d,validateWithTrigger:f,validate:n,resetValidation:o}=X(),I=r=>{var{count:l,gap:t}=e;return{color:p(r).color,marginRight:r!==i(l)?N(t):0}},z=r=>{var{name:l,color:t}=p(r);return{[s("content")]:!0,[s("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[s("--error")]:d.value,[s("--primary")]:l!==e.emptyIcon&&!t}},p=r=>{var{modelValue:l,disabled:t,disabledColor:u,color:y,half:T,emptyColor:w,icon:W,halfIcon:j,emptyIcon:q}=e,g=y;return(t||a!=null&&a.disabled.value)&&(g=u),r<=i(l)?{color:g,name:W}:T&&r<=i(l)+.5?{color:g,name:j}:{color:t||a!=null&&a.disabled.value?u:w,name:q}},B=(r,l)=>{if(e.half){var{offsetWidth:t}=l.target;l.offsetX<=Math.floor(t/2)&&(r-=.5)}m(e["onUpdate:modelValue"],r)},S=()=>n(e.rules,i(e.modelValue)),D=()=>Z(()=>f(["onChange"],"onChange",e.rules,e.modelValue)),U=(r,l)=>{var{readonly:t,disabled:u,onChange:y}=e;t||u||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(B(r,l),m(y,r),D())},V=()=>{m(e["onUpdate:modelValue"],0),o()},M={reset:V,validate:S,resetValidation:o};return m(v,M),{errorMessage:d,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:I,getClass:z,getCurrentState:p,handleClick:U,reset:V,validate:S,resetValidation:o,toSizeUnit:N,toNumber:i,n:s}}});C.install=function(e){e.component(C.name,C)};export{C as R};
