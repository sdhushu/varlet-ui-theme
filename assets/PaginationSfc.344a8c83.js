import{M as re}from"./menu.47c3cb0e.js";import{v as ue}from"./index.a7ee3f87.js";import{I as oe}from"./index.11f29402.js";import{C as te}from"./cell.9c6572b5.js";import{I as ve}from"./input.04e32de1.js";import{d as de,a as k,b as S,w as R,p as M,ai as me,f as d,h as p,D as I,N as u,O as A,q as h,aF as G,M as $,P as B,Q as f,F as W,ak as X,S as H,i as pe,j as D}from"./vue-router.esm-bundler.61b845b6.js";import{j as o,c as fe,g as J}from"./shared.cb7db5ff.js";import{p as ge}from"./index.2347886b.js";var be={current:{type:[Number,String]},size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},maxPagerCount:{type:Number,default:3},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!1},sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:{type:Function},onChange:{type:Function},"onUpdate:current":{type:Function},"onUpdate:size":{type:Function}},{n:ke,classes:Ce}=fe("pagination"),Ve=["item-mode","onClick"];function we(e,l){var V=M("var-icon"),C=M("var-input"),w=M("var-cell"),y=M("var-menu"),i=me("ripple");return d(),p("ul",{class:u(e.n())},[I((d(),p("li",{class:u(e.classes(e.n("item"),e.n("prev"),[e.current<=1||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:l[0]||(l[0]=a=>e.clickItem("prev"))},[A(e.$slots,"prev",{},()=>[h(V,{name:"chevron-left"})])],2)),[[i,{disabled:e.current<=1||e.disabled}]]),e.simple?(d(),p("li",{key:0,class:u(e.classes(e.n("simple"),[e.disabled,e.n("item--disabled")]))},[h(C,{modelValue:e.simpleValue,"onUpdate:modelValue":l[1]||(l[1]=a=>e.simpleValue=a),disabled:e.disabled,"var-pagination-cover":"",onBlur:l[2]||(l[2]=a=>e.setPage("simple",e.simpleValue,a)),onKeydown:l[3]||(l[3]=G(a=>e.setPage("simple",e.simpleValue,a),["enter"]))},null,8,["modelValue","disabled"]),$("span",null,[B(" / "+f(e.pageCount)+" ",1),$("div",{class:u(e.n("simple-line"))},null,2)])],2)):(d(!0),p(W,{key:1},X(e.pageList,(a,g)=>I((d(),p("li",{key:e.toNumber(a)+g,"item-mode":e.getMode(a,g),class:u(e.classes(e.n("item"),e.n("$-elevation--2"),[a===e.current&&!e.disabled,e.n("item--active")],[e.isHideEllipsis(a,g),e.n("item--hide")],[e.disabled,e.n("item--disabled")],[a===e.current&&e.disabled,e.n("item--disabled--active")])),onClick:P=>e.clickItem(a,g)},[B(f(a),1)],10,Ve)),[[i,{disabled:e.disabled}]])),128)),I((d(),p("li",{class:u(e.classes(e.n("item"),e.n("next"),[e.current>=e.pageCount||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:l[4]||(l[4]=a=>e.clickItem("next"))},[A(e.$slots,"next",{},()=>[h(V,{name:"chevron-right"})])],2)),[[i,{disabled:e.current>=e.pageCount||e.disabled}]]),e.showSizeChanger?(d(),p("li",{key:2,class:u(e.classes(e.n("size"),[e.disabled,e.n("item--disabled")]))},[h(y,{show:e.menuVisible,"onUpdate:show":l[6]||(l[6]=a=>e.menuVisible=a),"offset-x":-4},{menu:H(()=>[(d(!0),p(W,null,X(e.sizeOption,(a,g)=>I((d(),pe(w,{class:u(e.classes(e.n("list"),[e.size===a,e.n("list--active")])),key:g,onClick:P=>e.clickSize(a)},{default:H(()=>[B(f(a)+f(e.pack.paginationItem)+" / "+f(e.pack.paginationPage),1)]),_:2},1032,["class","onClick"])),[[i]])),128))]),default:H(()=>[$("div",{class:u(e.classes(e.n("size--open"),[e.current<=1||e.disabled,e.n("size--open--disabled")])),onClick:l[5]||(l[5]=function(){return e.showMenu&&e.showMenu(...arguments)})},[$("span",null,f(e.size)+f(e.pack.paginationItem)+" / "+f(e.pack.paginationPage),1),h(V,{class:u(e.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)]),_:1},8,["show"])],2)):D("v-if",!0),e.showQuickJumper&&!e.simple?(d(),p("li",{key:3,class:u(e.classes(e.n("quickly"),[e.disabled,"item--disabled"]))},[B(f(e.pack.paginationJump)+" ",1),h(C,{modelValue:e.inputValue,"onUpdate:modelValue":l[7]||(l[7]=a=>e.inputValue=a),disabled:e.disabled,"var-pagination-cover":"",onBlur:l[8]||(l[8]=a=>e.setPage("quick",e.inputValue,a)),onKeydown:l[9]||(l[9]=G(a=>e.setPage("quick",e.inputValue,a),["enter"]))},null,8,["modelValue","disabled"])],2)):D("v-if",!0),e.totalText?(d(),p("li",{key:4,class:u(e.n("total"))},f(e.totalText),3)):D("v-if",!0)],2)}const K=de({render:we,name:"VarPagination",components:{VarMenu:re,VarIcon:oe,VarCell:te,VarInput:ve},directives:{Ripple:ue},props:be,setup(e){var l=k(!1),V=k(""),C=k("1"),w=k(!1),y=k(!1),i=k(o(e.current)||1),a=k(o(e.size)||10),g=k([]),P=S(()=>Math.ceil(e.maxPagerCount/2)),r=S(()=>Math.ceil(o(e.total)/o(a.value))),Y=S(()=>{var n=a.value*(i.value-1)+1,s=Math.min(a.value*i.value,o(e.total));return[n,s]}),Z=S(()=>e.showTotal?e.showTotal(o(e.total),Y.value):""),c=(n,s)=>J(n)?!1:s===1?w.value:y.value,x=(n,s)=>J(n)?"basic":s===1?"head":"tail",_=(n,s)=>{n===i.value||e.disabled||(J(n)?i.value=n:n==="prev"?i.value>1&&(i.value-=1):n==="next"?i.value<r.value&&(i.value+=1):n==="..."&&(s===1?i.value=Math.max(i.value-e.maxPagerCount,1):i.value=Math.min(i.value+e.maxPagerCount,r.value)))},ee=()=>{e.disabled||(l.value=!0)},ae=n=>{a.value=n,l.value=!1},L=n=>{var s=/^[1-9][0-9]*$/;return s.test(n)},le=(n,s,z)=>{if(z.target.blur(),L(s)){var b=o(s);b>r.value&&(b=r.value,C.value=""+b),b!==i.value&&(i.value=b)}n==="quick"&&(V.value=""),n==="simple"&&!L(s)&&(C.value=""+i.value)};return R([()=>e.current,()=>e.size],n=>{var[s,z]=n;i.value=o(s)||1,a.value=o(z||10)}),R([i,a],(n,s)=>{var z,b,[t,O]=n,[Q,ie]=s;if(t>r.value){i.value=r.value;return}var v=[],{maxPagerCount:m,total:ne,onChange:j}=e,se=Math.ceil(o(ne)/o(ie)),N=r.value-(m-P.value)-1;if(C.value=""+t,r.value-2>m){if(Q===void 0||r.value!==se)for(var U=2;U<m+2;U++)v.push(U);if(t<=m&&t<N){v=[];for(var T=1;T<m+1;T++)v.push(T+1);w.value=!0,y.value=!1}if(t>m&&t<N){v=[];for(var F=1;F<m+1;F++)v.push(t+F-P.value);w.value=t===2&&m===1,y.value=!1}if(t>=N){v=[];for(var E=1;E<m+1;E++)v.push(r.value-(m-E)-1);w.value=!1,y.value=!0}v=[1,"...",...v,"...",r.value]}else for(var q=1;q<=r.value;q++)v.push(q);g.value=v,Q!==void 0&&r.value>0&&(j==null||j(t,O)),(z=e["onUpdate:current"])==null||z.call(e,t),(b=e["onUpdate:size"])==null||b.call(e,O)},{immediate:!0}),{n:ke,classes:Ce,pack:ge,current:i,menuVisible:l,size:a,pageCount:r,pageList:g,inputValue:V,simpleValue:C,totalText:Z,getMode:x,isHideEllipsis:c,clickItem:_,showMenu:ee,clickSize:ae,setPage:le,toNumber:o}}});K.install=function(e){e.component(K.name,K)};export{K as P};
