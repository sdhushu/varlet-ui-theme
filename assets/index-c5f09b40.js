import{C as f}from"./index-085596df.js";import{v as w,c as R}from"./shared-128c81f0.js";function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},d.apply(this,arguments)}var{n:_}=R("ripple"),h=250;function x(e){var{zIndex:t,position:r}=window.getComputedStyle(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",r==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function k(e,t){var{top:r,left:i}=e.getBoundingClientRect(),{clientWidth:a,clientHeight:n}=e,l=Math.sqrt(Math.pow(a,2)+Math.pow(n,2))/2,p=l*2,o=t.touches[0].clientX-i,s=t.touches[0].clientY-r,c=(a-l*2)/2,v=(n-l*2)/2,u=o-l,g=s-l;return{x:u,y:g,centerX:c,centerY:v,size:p}}function b(e){var t=this._ripple;if(t.removeRipple(),!(t.disabled||t.tasker)){var r=()=>{t.tasker=null;var{x:i,y:a,centerX:n,centerY:l,size:p}=k(this,e),o=document.createElement("div");o.classList.add(_()),o.style.opacity="0",o.style.transform="translate("+i+"px, "+a+"px) scale3d(.3, .3, .3)",o.style.width=p+"px",o.style.height=p+"px",t.color&&(o.style.backgroundColor=t.color),o.dataset.createdAt=String(performance.now()),x(this),this.appendChild(o),window.setTimeout(()=>{o.style.transform="translate("+n+"px, "+l+"px) scale3d(1, 1, 1)",o.style.opacity=".25"},20)};t.tasker=window.setTimeout(r,30)}}function m(){var e=this._ripple,t=()=>{var r=this.querySelectorAll("."+_());if(r.length){var i=r[r.length-1],a=h-performance.now()+Number(i.dataset.createdAt);setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{var n;return(n=i.parentNode)==null?void 0:n.removeChild(i)},h)},a)}};e.tasker?setTimeout(t,30):t()}function y(){var e=this._ripple;w()&&e.touchmoveForbid&&(e.tasker&&window.clearTimeout(e.tasker),e.tasker=null)}function E(e,t){var r,i,a;e._ripple=d({tasker:null},(r=t.value)!=null?r:{},{touchmoveForbid:(i=(a=t.value)==null?void 0:a.touchmoveForbid)!=null?i:f.touchmoveForbid,removeRipple:m.bind(e)}),e.addEventListener("touchstart",b,{passive:!0}),e.addEventListener("touchmove",y,{passive:!0}),e.addEventListener("dragstart",m,{passive:!0}),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0})}function L(e){e.removeEventListener("touchstart",b),e.removeEventListener("touchmove",y),e.removeEventListener("dragstart",m),document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple)}function $(e,t){var r,i,a,n,l,p,o,s={touchmoveForbid:(r=(i=t.value)==null?void 0:i.touchmoveForbid)!=null?r:f.touchmoveForbid,color:(a=t.value)==null?void 0:a.color,disabled:(n=t.value)==null?void 0:n.disabled},c=s.touchmoveForbid!==((l=e._ripple)==null?void 0:l.touchmoveForbid)||s.color!==((p=e._ripple)==null?void 0:p.color)||s.disabled!==((o=e._ripple)==null?void 0:o.disabled);if(c){var v,u;e._ripple=d({tasker:s.disabled?null:(v=e._ripple)==null?void 0:v.tasker,removeRipple:(u=e._ripple)==null?void 0:u.removeRipple},s)}}var T={mounted:E,unmounted:L,updated:$,install(e){e.directive("ripple",this)}};const N=T;export{N as v};
