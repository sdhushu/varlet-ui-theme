import{C as H}from"./cell-26be02c3.js";import{S as ce}from"./sticky-954ab3ea.js";import{d as U,a as f,b as T,G as de,f as h,i as Q,S as C,M as j,O as J,P as A,Q as p,m as ve,ar as fe,w as pe,e as me,x as he,h as _,F as W,ai as Z,N as $,R,o as ye,ac as ge,az as ke,ao as m,q as z}from"./vue-router.esm-bundler-fa266481.js";import{u as be,c as ee,a as X,E as Te,o as Ce,k as G,T as _e,P as Ie,e as K,K as Be,L as Se,M as xe,U as Ne,F as Y,r as we,O as Ee}from"./shared-128c81f0.js";import{u as Ae}from"./useChildren-57fd1ce4.js";import{d as Pe}from"./index-404bdbb6.js";import{p as M,u as Oe}from"./index-0d4c7929.js";import{u as De}from"./sync-1c3f49e5.js";/* empty css             */import"./CellSfc-4ed993c7.js";import"./index-59b46fed.js";import"./index-c5f09b40.js";import"./index-085596df.js";import"./_commonjsHelpers-725317a4.js";import"./index-7acf965d.js";var ae=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Le(){var{bindChildren:e,length:o,childProviders:a}=Ae(ae);return{length:o,indexAnchors:a,bindIndexAnchors:e}}function $e(){var{parentProvider:e,index:o,bindParent:a}=be(ae);if(!a)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:o,indexBar:e,bindIndexBar:a}}var ze={index:{type:[Number,String]}},{n:Me,classes:Re}=ee("index-anchor");function Ve(e,o){return h(),Q(fe(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[j("div",ve({class:e.n()},e.$attrs),[J(e.$slots,"default",{},()=>[A(p(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var re=U({name:"VarIndexAnchor",components:{VarSticky:ce},inheritAttrs:!1,props:ze,setup(e){var{index:o,indexBar:a,bindIndexBar:c}=$e(),i=f(0),n=f(!1),d=T(()=>e.index),r=f(null),{active:v,sticky:k,cssMode:b,stickyOffsetTop:I,zIndex:u}=a,D=()=>{r.value&&(i.value=r.value.$el?r.value.$el.offsetTop:r.value.offsetTop)},B=x=>{n.value=x},S={index:o,name:d,ownTop:i,setOwnTop:D,setDisabled:B};return c(S),{n:Me,classes:Re,name:d,anchorEl:r,active:v,sticky:k,zIndex:u,disabled:n,cssMode:b,stickyOffsetTop:I,Transition:de}}});re.render=Ve;const P=re;P.install=function(e){e.component(P.name,P)};var Fe={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:X(),onChange:X()};function q(e,o,a,c,i,n,d){try{var r=e[n](d),v=r.value}catch(k){a(k);return}r.done?o(v):Promise.resolve(v).then(c,i)}function E(e){return function(){var o=this,a=arguments;return new Promise(function(c,i){var n=e.apply(o,a);function d(v){q(n,c,i,d,r,"next",v)}function r(v){q(n,c,i,d,r,"throw",v)}d(void 0)})}}var{n:He,classes:Xe}=ee("index-bar"),Ge=["onClick"];function Ke(e,o){return h(),_("div",{class:$(e.n()),ref:"barEl"},[J(e.$slots,"default"),j("ul",{class:$(e.n("anchor-list")),style:R({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),_(W,null,Z(e.anchorNameList,a=>(h(),_("li",{key:a,class:$(e.classes(e.n("anchor-item"),[e.active===a,e.n("anchor-item--active")])),style:R({color:e.active===a&&e.highlightColor?e.highlightColor:""}),onClick:c=>e.anchorClick({anchorName:a,manualCall:!0})},p(a),15,Ge))),128))],6)],2)}var ne=U({name:"VarIndexBar",props:Fe,setup(e){var{length:o,indexAnchors:a,bindIndexAnchors:c}=Le(),i=f(""),n=f(null),d=f([]),r=f(),v=T(()=>e.sticky),k=T(()=>e.cssMode),b=T(()=>Te(e.stickyOffsetTop)),I=T(()=>e.zIndex),u=null,D={active:r,sticky:v,cssMode:k,stickyOffsetTop:b,zIndex:I};c(D);var B=(s,l)=>{var t=we(s)?s.name.value:s;t===r.value||t===void 0||(r.value=t,(l==null?void 0:l.event)!==!1&&K(e.onChange,t))},S=()=>{if(!("getBoundingClientRect"in u))return 0;var{top:s}=u.getBoundingClientRect(),{scrollTop:l}=u,{top:t}=n.value.getBoundingClientRect();return l-s+t},x=()=>{var s=Ie(u),l=u===window?document.body.scrollHeight:u.scrollHeight,t=S();a.forEach((y,g)=>{var N=y.ownTop.value,w=s-N+b.value-t,L=g===a.length-1?l:a[g+1].ownTop.value-y.ownTop.value;w>=0&&w<L&&i.value===""&&(g&&!e.cssMode&&a[g-1].setDisabled(!0),y.setDisabled(!1),B(y))})},V=function(){var s=E(function*(l){var{anchorName:t,manualCall:y=!1,options:g}=l;if(y&&K(e.onClick,t),t!==r.value){var N=a.find(ie=>{var{name:ue}=ie;return t===ue.value});if(N){var w=S(),L=N.ownTop.value-b.value+w,le=Be(u);i.value=t,B(t,g),yield Se(u,{left:le,top:L,animation:xe,duration:G(e.duration)}),Ne(()=>{i.value=""})}}});return function(t){return s.apply(this,arguments)}}(),te=function(){var s=E(function*(){yield Y(),u=Ee(n.value)});return function(){return s.apply(this,arguments)}}(),oe=()=>{u.addEventListener("scroll",x)},F=()=>{u.removeEventListener("scroll",x)},se=(s,l)=>{_e(()=>V({anchorName:s,options:l}))};return pe(()=>o.value,E(function*(){yield Y(),a.forEach(s=>{var{name:l,setOwnTop:t}=s;l.value&&d.value.push(l.value),t()})})),Ce(E(function*(){yield te(),oe()})),me(F),he(F),{n:He,classes:Xe,barEl:n,active:r,zIndex:I,anchorNameList:d,toNumber:G,scrollTo:se,anchorClick:V}}});ne.render=Ke;const O=ne;O.install=function(e){e.component(O.name,O)};const la={setup(e){const o=f([]),a=f("#e7edf7"),c=f("#2e67ba");ye(()=>{for(let n=0;n<26;n++)o.value.push(String.fromCharCode(65+n))});const i=n=>{console.log(n)};return ge(Oe),ke(Pe,n=>{a.value=n==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",c.value=n==="darkTheme"?"#3980e8":"#2e67ba"}),De(),(n,d)=>(h(),Q(m(O),{onChange:i,duration:"300","sticky-offset-top":"14.4vw"},{default:C(()=>[(h(!0),_(W,null,Z(o.value,r=>(h(),_("div",{key:r},[z(m(P),{index:r,class:"var-index-anchor__example",style:R({background:a.value,color:c.value})},{default:C(()=>[A(p(m(M).title)+" "+p(r),1)]),_:2},1032,["index","style"]),z(m(H),null,{default:C(()=>[A(p(r)+" "+p(m(M).text),1)]),_:2},1024),z(m(H),null,{default:C(()=>[A(p(r)+" "+p(m(M).text),1)]),_:2},1024)]))),128))]),_:1}))}};export{la as default};
