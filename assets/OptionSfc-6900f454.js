import{C as we}from"./checkbox-743c7bde.js";import{v as Fe}from"./index-c5f09b40.js";import{d as se,a as c,b as S,w as A,p as D,ag as Me,D as Ee,f as t,h as C,M as f,N as s,R as V,i as X,ah as ie,j as I,O as F,P as de,Q as O,q,S as Q,F as ne,ai as $e,n as Be}from"./vue-router.esm-bundler-fa266481.js";import{u as De,c as ue,a as k,l as B,n as Oe,e as v,E as oe,g as Pe}from"./shared-128c81f0.js";import{I as Ne}from"./index-59b46fed.js";import{M as Te}from"./menu-8142854e.js";import{C as Le}from"./index-62452fbc.js";import{F as We,u as Ae}from"./provide-982d6f56.js";import{u as Ie}from"./useChildren-57fd1ce4.js";var ve=Symbol("SELECT_BIND_OPTION_KEY");function Ue(){var{length:e,childProviders:a,bindChildren:d}=Ie(ve);return{length:e,options:a,bindOptions:d}}function Ye(){var{index:e,parentProvider:a,bindParent:d}=De(ve);if(!d)throw Error("<var-option/> must in <var-select/>");return{index:e,select:a,bindSelect:d}}var Re={label:{},value:{}},{n:ze,classes:je}=ue("option");function Ke(e,a){var d=D("var-checkbox"),b=Me("ripple");return Ee((t(),C("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.optionSelected,e.n("--selected-color")])),style:V({width:e.wrapWidth,color:e.optionSelected?e.focusColor:void 0}),onClick:a[2]||(a[2]=function(){return e.handleClick&&e.handleClick(...arguments)})},[f("div",{class:s(e.classes(e.n("cover"),[e.optionSelected,e.n("--selected-background")])),style:V({background:e.optionSelected?e.focusColor:void 0})},null,6),e.multiple?(t(),X(d,{key:0,ref:"checkbox","checked-color":e.focusColor,modelValue:e.optionSelected,"onUpdate:modelValue":a[0]||(a[0]=y=>e.optionSelected=y),onClick:a[1]||(a[1]=ie(()=>{},["stop"])),onChange:e.handleSelect},null,8,["checked-color","modelValue","onChange"])):I("v-if",!0),f("div",{class:s(e.classes(e.n("text"),e.n("$--ellipsis")))},[F(e.$slots,"default",{},()=>[de(O(e.label),1)])],2)],6)),[[b]])}var te=se({name:"VarOption",directives:{Ripple:Fe},components:{VarCheckbox:we},props:Re,setup(e){var a=c(!1),d=S(()=>a.value),b=S(()=>e.label),y=S(()=>e.value),{select:g,bindSelect:m}=Ye(),{wrapWidth:U,multiple:M,focusColor:E,onSelect:P,computeLabel:n}=g,Y=()=>{a.value=!a.value,P($)},h=()=>P($),R=z=>{a.value=z},$={label:b,value:y,selected:d,sync:R};return A([()=>e.label,()=>e.value],n),m($),{n:ze,classes:je,optionSelected:a,wrapWidth:U,multiple:M,focusColor:E,handleClick:Y,handleSelect:h}}});te.render=Ke;const G=te;G.install=function(e){e.component(G.name,G)};function qe(e){return["left","right","center"].includes(e)}var Qe={modelValue:{default:void 0},placeholder:{type:String},multiple:{type:Boolean,default:!1},offsetY:{type:[String,Number],default:0},chip:{type:Boolean,default:!1},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},separator:{type:String,default:","},textAlign:{type:String,default:"left",validator:qe},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:{type:Array},onFocus:k(),onBlur:k(),onClick:k(),onClear:k(),onClose:k(),onChange:k(),"onUpdate:modelValue":k()},{n:H,classes:Ge}=ue("select"),He={key:1};function Je(e,a){var d=D("var-chip"),b=D("var-icon"),y=D("var-menu"),g=D("var-form-details");return t(),C("div",{class:s(e.classes(e.n(),e.n("$--box"),[e.formDisabled||e.disabled,e.n("--disabled")])),onClick:a[3]||(a[3]=function(){return e.handleClick&&e.handleClick(...arguments)})},[f("div",{class:s(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:V({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[F(e.$slots,"prepend-icon")],2),f("div",{class:s(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")])),ref:"wrapEl",onClick:a[2]||(a[2]=function(){return e.handleFocus&&e.handleFocus(...arguments)})},[q(y,{"var-select-cover":"",class:s(e.classes(e.n("menu"))),"offset-y":e.offsetY,disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled,"default-style":!1,show:e.isFocus,"onUpdate:show":a[1]||(a[1]=m=>e.isFocus=m),onClose:e.handleBlur},{menu:Q(()=>[f("div",{ref:"menuEl",class:s(e.classes(e.n("scroller"),e.n("$-elevation--3")))},[F(e.$slots,"default")],2)]),default:Q(()=>[f("div",{class:s(e.classes(e.n("select"),[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:V({textAlign:e.textAlign,color:e.textColor})},[f("div",{class:s(e.n("label"))},[e.isEmptyModelValue?I("v-if",!0):F(e.$slots,"selected",{key:0},()=>[e.multiple?(t(),C(ne,{key:0},[e.chip?(t(),C("div",{key:0,class:s(e.n("chips"))},[(t(!0),C(ne,null,$e(e.labels,m=>(t(),X(d,{class:s(e.n("chip")),"var-select-cover":"",closable:"",size:"small",type:e.errorMessage?"danger":void 0,key:m,onClick:a[0]||(a[0]=ie(()=>{},["stop"])),onClose:()=>e.handleClose(m)},{default:Q(()=>[de(O(m),1)]),_:2},1032,["class","type","onClose"]))),128))],2)):(t(),C("div",{key:1,class:s(e.n("values"))},O(e.labels.join(e.separator)),3))],2112)):(t(),C("span",He,O(e.label),1))])],2),F(e.$slots,"arrow-icon",{focus:e.isFocus},()=>[q(b,{class:s(e.classes(e.n("arrow"),[e.isFocus,e.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])])],6),f("label",{class:s(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:V({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},O(e.placeholder),7)]),_:3},8,["class","offset-y","disabled","show","onClose"])],2),f("div",{class:s(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[F(e.$slots,"append-icon",{},()=>[e.clearable?(t(),X(b,{key:0,class:s(e.n("clear-icon")),name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):I("v-if",!0)])],2)],6),e.line?(t(),C("div",{key:0,class:s(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:V({background:e.errorMessage?void 0:e.blurColor})},[f("div",{class:s(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:V({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):I("v-if",!0),q(g,{"error-message":e.errorMessage},null,8,["error-message"])],2)}var fe=se({name:"VarSelect",components:{VarIcon:Ne,VarMenu:Te,VarChip:Le,VarFormDetails:We},props:Qe,setup(e){var a=c(null),d=c(!1),b=S(()=>e.multiple),y=S(()=>e.focusColor),g=c(""),m=c([]),U=S(()=>B(e.modelValue)),M=c("0px"),E=c(0),{bindForm:P,form:n}=Ae(),{length:Y,options:h,bindOptions:R}=Ue(),{errorMessage:$,validateWithTrigger:z,validate:me,resetValidation:j}=Oe(),pe=c(null),Z=()=>{var{multiple:r,modelValue:l}=e;if(r){var o=l;m.value=o.map(_)}!r&&!B(l)&&(g.value=_(l)),!r&&B(l)&&(g.value="")},w=r=>{Be(()=>{var{validateTrigger:l,rules:o,modelValue:i}=e;z(l,r,o,i)})},N=r=>{var{value:l,label:o}=r;return l.value!=null?l.value:o.value},_=r=>{var l,o,i=h.find(p=>{var{value:u}=p;return u.value===r});return i||(i=h.find(p=>{var{label:u}=p;return u.value===r})),(l=(o=i)==null?void 0:o.label.value)!=null?l:""},be=()=>{var{hint:r,modelValue:l}=e;if(!r&&!B(l))return H("--placeholder-hidden");if(r&&(!B(l)||d.value))return H("--placeholder-hint")},x=()=>a.value&&window.getComputedStyle(a.value).width||"0px",he=()=>{var{disabled:r,readonly:l,onFocus:o}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||(M.value=x(),E.value=oe(e.offsetY),d.value=!0,v(o),w("onFocus"))},ce=()=>{var{disabled:r,readonly:l,onBlur:o}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||(v(o),w("onBlur"))},Ce=r=>{var{disabled:l,readonly:o,multiple:i,onChange:p}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||l||o)){var u=i?h.filter(T=>{var{selected:L}=T;return L.value}).map(N):N(r);v(e["onUpdate:modelValue"],u),v(p,u),w("onChange"),!i&&(d.value=!1)}},ye=()=>{var{disabled:r,readonly:l,multiple:o,clearable:i,onClear:p}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||r||l||!i)){var u=o?[]:void 0;v(e["onUpdate:modelValue"],u),v(p,u),w("onClear")}},ge=r=>{var{disabled:l,onClick:o}=e;n!=null&&n.disabled.value||l||(v(o,r),w("onClick"))},ke=r=>{var{disabled:l,readonly:o,modelValue:i,onClose:p}=e;if(!(n!=null&&n.disabled.value||n!=null&&n.readonly.value||l||o)){var u=i,T=h.find(K=>{var{label:W}=K;return W.value===r}),L=u.filter(K=>{var W;return K!==((W=T.value.value)!=null?W:T.label.value)});v(e["onUpdate:modelValue"],L),v(p,L),w("onClose")}},ee=()=>{var{multiple:r,modelValue:l}=e;if(r){var o=l;h.forEach(i=>i.sync(o.includes(N(i))))}else h.forEach(i=>i.sync(l===N(i)));Z()},Ve=()=>{M.value=x(),E.value=oe(e.offsetY),d.value=!0},Se=()=>{d.value=!1},le=()=>me(e.rules,e.modelValue),ae=()=>{v(e["onUpdate:modelValue"],e.multiple?[]:void 0),j()};A(()=>e.multiple,()=>{var{multiple:r,modelValue:l}=e;if(r&&!Pe(l))throw Error("The modelValue must be an array when multiple is true")}),A(()=>e.modelValue,ee,{deep:!0}),A(()=>Y.value,ee);var re={wrapWidth:S(()=>M.value),multiple:b,focusColor:y,computeLabel:Z,onSelect:Ce,reset:ae,validate:le,resetValidation:j};return R(re),v(P,re),{wrapEl:a,offsetY:E,isFocus:d,errorMessage:$,formDisabled:n==null?void 0:n.disabled,formReadonly:n==null?void 0:n.readonly,label:g,labels:m,isEmptyModelValue:U,menuEl:pe,n:H,classes:Ge,computePlaceholderState:be,handleFocus:he,handleBlur:ce,handleClear:ye,handleClick:ge,handleClose:ke,reset:ae,validate:le,resetValidation:j,focus:Ve,blur:Se}}});fe.render=Je;const J=fe;J.install=function(e){e.component(J.name,J)};export{G as O,J as S};
