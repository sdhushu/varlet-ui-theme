import{I as X}from"./index-59b46fed.js";import{F as j,u as G}from"./provide-982d6f56.js";import{v as J}from"./index-c5f09b40.js";import{H as K,a as Q,u as Y}from"./index-fe11295e.js";import{a as D,n as Z,e as u,t as I,k as i,c as $}from"./shared-128c81f0.js";import{d as x,a as ee,p as C,ag as z,f as S,h as V,M as ae,F as re,ai as le,D as oe,R as B,N as f,q as H,n as ne}from"./vue-router.esm-bundler-fa266481.js";var te={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:D(),"onUpdate:modelValue":D()},{n:s}=$("rate"),ie=["onClick"];function se(e,a){var c=C("var-icon"),d=C("var-hover-overlay"),p=C("var-form-details"),g=z("ripple"),t=z("hover");return S(),V("div",{class:f(e.n("wrap"))},[ae("div",{class:f(e.n())},[(S(!0),V(re,null,le(e.toNumber(e.count),o=>oe((S(),V("div",{key:o,style:B(e.getStyle(o)),class:f(e.getClass(o)),onClick:v=>e.handleClick(o,v)},[H(c,{class:f(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(o).name,style:B({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),H(d,{hovering:e.hovering&&o===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,ie)),[[g,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[t,e.createHoverHandler(o),"desktop"]])),128))],2),H(p,{"error-message":e.errorMessage},null,8,["error-message"])],2)}var F=x({name:"VarRate",components:{VarIcon:X,VarFormDetails:j,VarHoverOverlay:K},directives:{Ripple:J,Hover:Q},props:te,setup(e){var{form:a,bindForm:c}=G(),{errorMessage:d,validateWithTrigger:p,validate:g,resetValidation:t}=Z(),{hovering:o}=Y(),v=ee(-1),U=r=>{var{count:l,gap:n}=e;return{color:y(r).color,marginRight:r!==i(l)?I(n):0}},M=r=>{var{name:l,color:n}=y(r);return{[s("content")]:!0,[s("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[s("--error")]:d.value,[s("--primary")]:l!==e.emptyIcon&&!n}},y=r=>{var{modelValue:l,disabled:n,disabledColor:m,color:h,half:P,emptyColor:W,icon:q,halfIcon:A,emptyIcon:E}=e,b=h;return(n||a!=null&&a.disabled.value)&&(b=m),r<=i(l)?{color:b,name:q}:P&&r<=i(l)+.5?{color:b,name:A}:{color:n||a!=null&&a.disabled.value?m:W,name:E}},_=(r,l)=>{if(e.half){var{offsetWidth:n}=l.target;l.offsetX<=Math.floor(n/2)&&(r-=.5)}u(e["onUpdate:modelValue"],r)},N=()=>g(e.rules,i(e.modelValue)),O=()=>ne(()=>p(["onChange"],"onChange",e.rules,e.modelValue)),T=(r,l)=>{var{readonly:n,disabled:m,onChange:h}=e;n||m||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(_(r,l),u(h,r),O())},w=r=>l=>{v.value=r,o.value=l},R=()=>{u(e["onUpdate:modelValue"],0),t()},L={reset:R,validate:N,resetValidation:t};return u(c,L),{errorMessage:d,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:U,getClass:M,getCurrentState:y,handleClick:T,hovering:o,currentHoveringValue:v,createHoverHandler:w,reset:R,validate:N,resetValidation:t,toSizeUnit:I,toNumber:i,n:s}}});F.render=se;const k=F;k.install=function(e){e.component(k.name,k)};export{k as R};
